import{u as _,r as d,j as e,L as u}from"./react-vendor-wqxTS4Az.js";import{Timestamp as w,collection as k,query as D,where as f,orderBy as J,limit as B,getDocs as A}from"./firebase-firestore-CCnivBKz.js";import{u as ee,d as S}from"./index-1iGq18Ep.js";import"./firebase-app-CzzSlWfx.js";const le=({user:r})=>{const m=_(),[x,V]=d.useState([]),[L,P]=d.useState([]),[j,T]=d.useState(!1),[R,E]=d.useState(!1),[p,b]=d.useState(null),[C,I]=d.useState(null),{currentUser:y}=ee(),[v,z]=d.useState([]),[q,M]=d.useState(!0),[O,$]=d.useState(null),h=(()=>{let t=0,a=0;const o=["displayName","email","phoneNumber"];t+=o.length,o.forEach(l=>{r[l]&&a++});const c=["companyName","companyAddress","companyCity","companyPostalCode","kvkNumber"];if(t+=c.length,c.forEach(l=>{r[l]&&a++}),r.profile){const l=["company","position","companyLogo","companyWebsite","companyDescription"];t+=l.length,l.forEach(n=>{r.profile&&r.profile[n]&&a++})}return Math.round(a/t*100)})(),G=()=>h<40?"bg-red-500":h<70?"bg-yellow-500":"bg-green-500",K=()=>r.profile&&r.profile.company?r.profile.company:r.companyName?r.companyName:"Je bedrijf",W=()=>{m("/create-job")},H=t=>{m(`/job/${t}`)},Q=()=>{m("/schedule-meeting")};d.useEffect(()=>{(async()=>{if(y)try{E(!0),I(null);const a=w.now(),o=k(S,"meetings"),c=D(o,f("recruiterId","==",y.uid),f("dateTime",">=",a),J("dateTime","asc"),B(5)),l=await A(c),n=[];l.forEach(i=>{const s=i.data();n.push({id:i.id,title:s.title||"Ongetitelde afspraak",candidateName:s.candidateName||"Onbekende kandidaat",dateTime:s.dateTime,endDateTime:s.endDateTime,locationType:s.locationType,location:s.location,meetingLink:s.meetingLink,status:s.status||"gepland"})}),P(n)}catch(a){console.error("Fout bij ophalen van meetings:",a),I("Er is een fout opgetreden bij het ophalen van je afspraken")}finally{E(!1)}})()},[y]),d.useEffect(()=>{(async()=>{console.log("Gebruiker ID velden:",{id:r.id,uid:r.uid,allKeys:Object.keys(r)});const a=r.id||r.uid;if(!a){console.log("Geen gebruikers-ID gevonden om vacatures mee op te halen",r),b("Gebruikers-ID niet gevonden. Probeer opnieuw in te loggen.");return}console.log("Vacatures ophalen voor recruiterId:",a),T(!0),b(null);try{const o=k(S,"jobs"),c=D(o,f("recruiterId","==",a),B(50));console.log("Query uitgevoerd...");const l=await A(c);console.log(`Aantal gevonden vacatures: ${l.size}`);const n=[];l.forEach(i=>{const s=i.data();console.log("Vacature data:",{id:i.id,title:s.title,recruiterId:s.recruiterId,createdAt:s.createdAt}),n.push({id:i.id,title:s.title||"Onbekende functie",company:s.company||"Onbekend bedrijf",location:s.location||"Onbekende locatie",createdAt:s.createdAt,status:s.status||"active"})}),n.sort((i,s)=>{var g,F;if(!i.createdAt)return 1;if(!s.createdAt)return-1;try{const N=i.createdAt instanceof w||(g=i.createdAt)!=null&&g.toDate?i.createdAt.toDate():new Date(i.createdAt);return(s.createdAt instanceof w||(F=s.createdAt)!=null&&F.toDate?s.createdAt.toDate():new Date(s.createdAt)).getTime()-N.getTime()}catch(N){return console.error("Fout bij sorteren:",N),0}}),console.log("Opgehaalde vacatures (gesorteerd):",n),V(n)}catch(o){console.error("Fout bij ophalen van vacatures:",o),b("Er is een fout opgetreden bij het ophalen van je vacatures")}finally{T(!1)}})()},[r]),d.useEffect(()=>{(async()=>{if(r.id)try{M(!0),$(null);const a=D(k(S,"sollicitaties"),f("recruiterId","==",r.id),J("applicationDate","desc")),o=await A(a),c=[];o.forEach(l=>{const n=l.data();c.push({id:l.id,jobId:n.jobId,jobTitle:n.jobTitle||"Onbekende functie",userId:n.userId,applicantName:n.applicantName||"Onbekende kandidaat",status:n.status||"pending",applicationDate:n.applicationDate,location:n.location})}),z(c)}catch(a){console.error("Fout bij ophalen sollicitaties:",a),$("Er is een fout opgetreden bij het laden van sollicitaties")}finally{M(!1)}})()},[r.id]);const U=t=>t?t.toDate().toLocaleDateString("nl-NL",{day:"numeric",month:"long",year:"numeric"}):"Onbekende datum",Z=t=>{switch(t){case"pending":return{color:"blue",bg:"blue-100",text:"Nieuw"};case"reviewing":return{color:"yellow",bg:"yellow-100",text:"In behandeling"};case"interview":return{color:"green",bg:"green-100",text:"Gesprek ingepland"};case"rejected":return{color:"red",bg:"red-100",text:"Afgewezen"};case"accepted":return{color:"emerald",bg:"emerald-100",text:"Aangenomen"};default:return{color:"gray",bg:"gray-100",text:"Onbekend"}}},X=t=>{m(`/applications/${t}`)},Y=(t,a)=>{const o=t.toDate(),c=a.toDate(),l=new Date,n=new Date(l);n.setDate(n.getDate()+1);let i="";o.toDateString()===l.toDateString()?i="Vandaag":o.toDateString()===n.toDateString()?i="Morgen":i=o.toLocaleDateString("nl-NL",{weekday:"long",day:"numeric",month:"long"});const s=o.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit",hour12:!1}),g=c.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${i}, ${s} - ${g}`};return e.jsx("div",{className:"min-h-screen bg-white",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-20",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-r from-primary-700 to-primary-900 text-white",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welkom, ",r.displayName||"Recruiter"]}),e.jsxs("p",{className:"mt-2 text-primary-100",children:["Beheer je vacatures en vind de juiste kandidaten voor ",K()]})]}),e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Bedrijfsprofiel"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Maak je bedrijfsprofiel compleet om meer geschikte kandidaten te vinden"})]}),e.jsxs("div",{className:"mt-4 md:mt-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative w-48 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${G()}`,style:{width:`${h}%`}})}),e.jsxs("span",{className:"ml-3 font-medium",children:[h,"% compleet"]})]}),e.jsx(u,{to:"/profile/recruiter",className:"mt-2 inline-block text-primary-600 hover:text-primary-800 font-medium",children:"Profiel verbeteren →"})]})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Mijn vacatures"}),e.jsx("button",{onClick:W,className:"px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded-md",children:"+ Nieuwe vacature"})]}),j&&e.jsxs("div",{className:"flex justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-2",children:"Laden..."})]}),p&&e.jsxs("div",{className:"text-red-600 text-sm mb-4 bg-red-50 p-3 rounded-md",children:[e.jsx("p",{className:"font-medium",children:"Er is een fout opgetreden:"}),e.jsx("p",{children:p}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-primary-600 hover:text-primary-800 font-medium",children:"Probeer opnieuw"})]}),!j&&!p&&x.length===0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-gray-500 text-sm italic",children:"Je hebt nog geen vacatures geplaatst."}),e.jsx(u,{to:"/create-job",className:"block text-primary-600 hover:text-primary-800 font-medium",children:"Aan de slag met je eerste vacature"})]}),!j&&!p&&x.length>0&&e.jsxs("div",{className:"space-y-3",children:[x.map(t=>{var a;return e.jsx("div",{onClick:()=>H(t.id),className:"border rounded-md p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.company," • ",t.location]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(a=t.createdAt)!=null&&a.toDate?new Date(t.createdAt.toDate()).toLocaleDateString("nl-NL",{year:"numeric",month:"long",day:"numeric"}):"Datum onbekend"})]}),e.jsx("div",{children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="active"?"bg-green-100 text-green-800":t.status==="paused"?"bg-yellow-100 text-yellow-800":t.status==="deleted"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.status==="active"?"Actief":t.status==="paused"?"Gepauzeerd":t.status==="closed"?"Gesloten":t.status==="deleted"?"Verwijderd":"Onbekend"})})]})},t.id)}),e.jsx("div",{className:"mt-4",children:e.jsx(u,{to:"/create-job",className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:"+ Nog een vacature plaatsen"})})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm p-5",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Ontvangen sollicitaties"}),e.jsx("div",{className:"space-y-3",children:q?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 text-sm",children:"Sollicitaties laden..."})]}):O?e.jsx("div",{className:"text-red-500 text-sm py-2",children:O}):v.length>0?e.jsx("div",{className:"space-y-3",children:v.map(t=>{const a=Z(t.status);return e.jsxs("div",{className:`border-l-4 border-${a.color}-500 pl-3 py-2 hover:bg-gray-50 cursor-pointer`,onClick:()=>X(t.id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.applicantName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.jobTitle," ",t.location?`• ${t.location}`:""]})]}),e.jsx("span",{className:`text-xs bg-${a.bg} text-${a.color}-800 px-2 py-1 rounded flex items-center h-fit`,children:a.text})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sollicitatie ontvangen op ",U(t.applicationDate)]})]},t.id)})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-sm italic",children:"Je hebt nog geen sollicitaties ontvangen."}),e.jsx("a",{href:"/create-job",className:"block text-primary-600 hover:text-primary-800 font-medium",children:"Plaats een vacature om sollicitaties te ontvangen"})]})})]}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm p-5 md:col-span-2",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Statistieken"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:x.length}),e.jsx("p",{className:"text-sm text-blue-800",children:"Actieve vacatures"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-700",children:v.length}),e.jsx("p",{className:"text-sm text-green-800",children:"Sollicitaties ontvangen"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:"0"}),e.jsx("p",{className:"text-sm text-purple-800",children:"Interviews ingepland"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:"0"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Kandidaten benaderd"})]})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Favoriete kandidaten"}),e.jsx("a",{href:"/candidates",className:"px-3 py-1 text-primary-600 hover:text-primary-700 text-sm",children:"Alle kandidaten bekijken →"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-500 text-sm italic",children:"Je hebt nog geen favoriete kandidaten toegevoegd."}),e.jsx("div",{className:"hidden",children:e.jsxs("div",{className:"border rounded-md p-3 flex items-center hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold mr-3",children:"JD"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Jan de Vries"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Frontend Developer • 4 jaar ervaring"})]}),e.jsxs("div",{className:"ml-auto flex space-x-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-primary-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]})]})}),e.jsx("a",{href:"/candidates",className:"block text-primary-600 hover:text-primary-800 font-medium",children:"Zoek kandidaten om toe te voegen"})]})]}),e.jsxs("div",{className:"bg-white border rounded-lg shadow-sm p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Agenda"}),e.jsx("button",{onClick:Q,className:"px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded-md",children:"+ Afspraak toevoegen"})]}),e.jsxs("div",{className:"space-y-3",children:[R?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 text-sm",children:"Agenda laden..."})]}):C?e.jsx("div",{className:"text-red-500 text-sm py-2",children:C}):L.length===0?e.jsx("p",{className:"text-gray-500 text-sm italic",children:"Je hebt geen geplande afspraken voor de komende dagen."}):e.jsx("div",{className:"space-y-3",children:L.map(t=>e.jsx("div",{className:"border-l-4 border-primary-500 pl-3 py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 text-primary-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:Y(t.dateTime,t.endDateTime)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Met ",t.candidateName]})]})]})},t.id))}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(u,{to:"/agenda",className:"inline-block text-primary-600 hover:text-primary-800 font-medium",children:"Beheer je agenda"})})]})]})]})]})})})};export{le as default};
//# sourceMappingURL=RecruiterDashboard-CnDZUxII.js.map
