import{e as te,d as le,r as o,j as e}from"./react-vendor-BJ-6AA60.js";import{doc as ae,getDoc as oe,collection as ie,getDocs as ne}from"./firebase-firestore-CCnivBKz.js";import{H as L,F as V,d as K}from"./index-CVvBu09D.js";import"./firebase-app-CzzSlWfx.js";const he=()=>{var M,A,F,E,S,W,G;const{id:n}=te(),f=le(),[s,Q]=o.useState(null),[q,y]=o.useState(!0),[U,N]=o.useState(null),[w,P]=o.useState("overview"),[I,J]=o.useState(!1),X=o.useRef(null);o.useEffect(()=>{(async()=>{var a,h,B,O,T;if(!n){N("Geen kandidaat ID gevonden"),y(!1);return}try{const R=ae(K,"users",n),C=await oe(R);if(C.exists()){const t=C.data();console.log("Gebruikersgegevens geladen:",t),console.log("Profile photo fields:",{photoURL:t.photoURL,profilePhoto:t.profilePhoto,profileImageURL:t.profileImageURL,profileImage:t.profileImage,"profile.profilePhoto":(a=t.profile)==null?void 0:a.profilePhoto}),console.log("Beschikbaarheid velden:",{"isAvailableForWork (root)":t.isAvailableForWork,"profile.isAvailableForWork":(h=t.profile)==null?void 0:h.isAvailableForWork,"available na toewijzing":t.isAvailableForWork===!0||((B=t.profile)==null?void 0:B.isAvailableForWork)===!0});const se=ie(K,"users",n,"cv"),g=await ne(se);console.log("CV collectie bestaat. Aantal documenten:",g.size),console.log("CV documenten IDs:",g.docs.map(j=>j.id));let p,$="main";if(g.empty)console.log("Geen CV documenten gevonden in de subcollectie");else{const j=g.docs.find(re=>re.id==="main");j?(p=j.data(),console.log("CV 'main' document gevonden:",p)):($=g.docs[0].id,p=g.docs[0].data(),console.log(`Geen 'main' document gevonden, gebruikte eerste document met ID ${$}:`,p))}Q({id:C.id,...t,name:t.displayName||t.name||"Onbekende naam",profileImage:t.profilePhoto||t.profileImageURL||t.photoURL||((O=t.profile)==null?void 0:O.profilePhoto),available:t.isAvailableForWork===!0||((T=t.profile)==null?void 0:T.isAvailableForWork)===!0,cv:p||void 0}),console.log("CV gegevens in candidate state:",p)}else N("Kandidaat niet gevonden");y(!1)}catch(R){console.error("Error fetching candidate:",R),N("Er is een fout opgetreden bij het laden van de kandidaat"),y(!1)}})()},[n]),o.useEffect(()=>{var r;if(s){const a=s.profilePhoto||s.profileImageURL||s.photoURL||((r=s.profile)==null?void 0:r.profilePhoto);a?(console.log("Profielfoto URL gevonden:",a),console.log("Veld dat wordt gebruikt:",s.profilePhoto?"profilePhoto":s.profileImageURL?"profileImageURL":s.photoURL?"photoURL":"profile.profilePhoto")):console.log("Geen profielfoto URL beschikbaar")}},[s]);const Y=r=>{if(!r)return!1;try{new URL(r)}catch{return console.error("Ongeldige URL format:",r),!1}return r.includes("firebasestorage.googleapis.com")||r.match(/\.(jpeg|jpg|gif|png|webp|svg|bmp)$/i)!==null||r.startsWith("data:image/")?!0:r.startsWith("http")?(console.warn("URL zonder duidelijke afbeeldingsextensie:",r),!0):!1},Z=()=>{console.error("Profielfoto kon niet worden geladen:",s==null?void 0:s.profileImage),J(!0)},D=()=>{f(`/schedule-meeting/${n}`)},z=()=>{f(`/chat/${n}`)},i=r=>{if(!r)return"Heden";try{return(r.toDate?r.toDate():new Date(r)).toLocaleDateString("nl-NL",{year:"numeric",month:"long"})}catch(a){return console.error("Error formatting date:",a),"Onbekende datum"}};if(q)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(L,{}),e.jsx("div",{className:"container mx-auto px-4 py-32 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),e.jsx(V,{})]});if(U||!s)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(L,{}),e.jsx("div",{className:"container mx-auto px-4 py-32 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Kandidaat niet gevonden"}),e.jsx("p",{className:"text-gray-600 mb-6",children:U||"Deze kandidaat bestaat niet of is verwijderd."}),e.jsx("button",{onClick:()=>f("/candidates"),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Terug naar kandidaten"})]})}),e.jsx(V,{})]});const k=(r,a="")=>{const h=r;return s[h]&&typeof s[h]=="string"?s[h]:s.professionalDetails&&s.professionalDetails[r]?s.professionalDetails[r]:s.profile&&s.profile[r]?s.profile[r]:a},_=k("jobTitle","Functie onbekend"),ee=k("bio",k("about","")),b=s.skills||((M=s.professionalDetails)==null?void 0:M.skills)||((A=s.profile)==null?void 0:A.skills)||[],H=s.location||s.city||"Locatie onbekend",l=s.cv;console.log("CV data in render:",l);const u=r=>r?Array.isArray(r)?r:[]:[],v=(l==null?void 0:l.overMij)||ee,c=u(l==null?void 0:l.werkervaring),d=u(l==null?void 0:l.opleiding),m=u(l==null?void 0:l.stages),x=u(l==null?void 0:l.certificaten);return console.log("CV sectie gegevens:"),console.log("- aboutMe:",v),console.log("- workExperience:",c,"length:",c==null?void 0:c.length),console.log("- education:",d,"length:",d==null?void 0:d.length),console.log("- internships:",m,"length:",m==null?void 0:m.length),console.log("- certificates:",x,"length:",x==null?void 0:x.length),e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(L,{}),e.jsxs("div",{className:"container mx-auto px-4 py-32",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>f("/candidates"),className:"text-primary-600 hover:text-primary-800 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Terug naar kandidaten"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-8 bg-gradient-to-r from-primary-600 to-primary-800 text-white",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 bg-white rounded-full text-primary-600 flex items-center justify-center text-4xl font-bold mb-4 md:mb-0 md:mr-6 overflow-hidden border-4 border-white shadow-lg relative",children:(s!=null&&s.profileImage||s!=null&&s.profilePhoto||s!=null&&s.profileImageURL||s!=null&&s.photoURL||(F=s==null?void 0:s.profile)!=null&&F.profilePhoto)&&!I&&Y((s==null?void 0:s.profileImage)||(s==null?void 0:s.profilePhoto)||(s==null?void 0:s.profileImageURL)||(s==null?void 0:s.photoURL)||((E=s==null?void 0:s.profile)==null?void 0:E.profilePhoto)||"")?e.jsxs(e.Fragment,{children:[e.jsx("img",{ref:X,src:s.profileImage||s.profilePhoto||s.profileImageURL||s.photoURL||((S=s.profile)==null?void 0:S.profilePhoto),alt:s.name,className:"w-full h-full object-cover",onError:Z}),e.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center bg-gray-200 text-gray-500 opacity-0",style:{opacity:I?1:0},children:s!=null&&s.name?s.name.substring(0,2).toUpperCase():"KP"})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:s!=null&&s.name?s.name.substring(0,2).toUpperCase():"KP"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.name}),e.jsx("p",{className:"text-xl text-primary-100",children:_}),e.jsxs("div",{className:"flex items-center mt-3",children:[e.jsx("span",{className:`inline-block w-3 h-3 rounded-full mr-2 ${s.available?"bg-green-400":"bg-red-400"}`}),e.jsx("span",{className:"text-primary-50",children:s.available?"Beschikbaar voor nieuwe kansen":"Momenteel niet beschikbaar"})]})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>P("overview"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${w==="overview"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overzicht"}),e.jsx("button",{onClick:()=>P("cv"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${w==="cv"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"CV"})]})}),w==="overview"?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Over mij"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:v||"Deze kandidaat heeft nog geen bio toegevoegd."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Video Pitch"}),s.pitchVideo||(W=s.profile)!=null&&W.pitchVideo?e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden shadow-md",children:e.jsxs("video",{controls:!0,className:"w-full h-full",poster:"/images/video-thumbnail.jpg",children:[e.jsx("source",{src:s.pitchVideo||((G=s.profile)==null?void 0:G.pitchVideo),type:"video/mp4"}),"Uw browser ondersteunt geen video weergave."]})}):e.jsx("p",{className:"text-gray-500 italic",children:"Deze kandidaat heeft nog geen video pitch toegevoegd."})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Vaardigheden"}),b.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((r,a)=>e.jsx("span",{className:"px-3 py-1 bg-primary-50 text-primary-700 rounded-full text-sm font-medium",children:r},a))}):e.jsx("p",{className:"text-gray-500 italic",children:"Geen vaardigheden opgegeven"})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-gray-500 mb-1",children:"Locatie"}),e.jsx("p",{className:"text-gray-800",children:H})]}),s.email&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-gray-500 mb-1",children:"E-mail"}),e.jsx("p",{className:"text-gray-800",children:s.email})]}),s.phoneNumber&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-gray-500 mb-1",children:"Telefoonnummer"}),e.jsx("p",{className:"text-gray-800",children:s.phoneNumber})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("button",{onClick:D,className:"w-full flex items-center justify-center py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Afspraak maken"]}),e.jsxs("button",{onClick:z,className:"w-full flex items-center justify-center py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),"Chatten"]})]})]})]})}):e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Over Mij"}),v?e.jsx("div",{className:"bg-white rounded-md shadow-sm p-6 border border-gray-100",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:v})}):e.jsx("p",{className:"text-gray-500 italic",children:"Geen persoonlijke informatie toegevoegd"})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Werkervaring"}),c.length>0?e.jsx("div",{className:"space-y-8",children:c.map(r=>e.jsxs("div",{className:"relative pl-8 before:absolute before:left-0 before:top-0 before:bottom-0 before:w-0.5 before:bg-primary-100",children:[e.jsx("div",{className:"absolute left-0 top-1.5 w-4 h-4 rounded-full bg-primary-600 -ml-2"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:r.functie}),e.jsx("p",{className:"text-primary-700 font-medium",children:r.bedrijf}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i(r.startDatum)," - ",r.isHuidigeFunctie?"Heden":i(r.eindDatum)]}),r.beschrijving&&e.jsx("p",{className:"mt-3 text-gray-700",children:r.beschrijving})]},r.id))}):e.jsx("p",{className:"text-gray-500 italic",children:"Geen werkervaring toegevoegd"})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Opleiding"}),d.length>0?e.jsx("div",{className:"space-y-8",children:d.map(r=>e.jsxs("div",{className:"relative pl-8 before:absolute before:left-0 before:top-0 before:bottom-0 before:w-0.5 before:bg-primary-100",children:[e.jsx("div",{className:"absolute left-0 top-1.5 w-4 h-4 rounded-full bg-primary-600 -ml-2"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:r.opleiding}),e.jsx("p",{className:"text-primary-700 font-medium",children:r.instituut}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i(r.startDatum)," - ",r.isHuidigeOpleiding?"Heden":i(r.eindDatum)]}),r.beschrijving&&e.jsx("p",{className:"mt-3 text-gray-700",children:r.beschrijving})]},r.id))}):e.jsx("p",{className:"text-gray-500 italic",children:"Geen opleiding toegevoegd"})]}),m.length>0&&e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Stages"}),e.jsx("div",{className:"space-y-8",children:m.map(r=>e.jsxs("div",{className:"relative pl-8 before:absolute before:left-0 before:top-0 before:bottom-0 before:w-0.5 before:bg-primary-100",children:[e.jsx("div",{className:"absolute left-0 top-1.5 w-4 h-4 rounded-full bg-primary-600 -ml-2"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:r.functie}),e.jsx("p",{className:"text-primary-700 font-medium",children:r.bedrijf}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i(r.startDatum)," - ",r.isHuidigeStage?"Heden":i(r.eindDatum)]}),r.beschrijving&&e.jsx("p",{className:"mt-3 text-gray-700",children:r.beschrijving})]},r.id))})]}),x.length>0&&e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Certificaten"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(r=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:r.naam||"Certificaat"}),r.uitgever&&e.jsx("p",{className:"text-primary-700",children:r.uitgever}),r.datum&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i(r.datum)}),r.beschrijving&&e.jsx("p",{className:"mt-3 text-gray-700",children:r.beschrijving})]},r.id))})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Vaardigheden"}),b.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((r,a)=>e.jsx("span",{className:"px-3 py-1 bg-primary-50 text-primary-700 rounded-full text-sm font-medium",children:r},a))}):e.jsx("p",{className:"text-gray-500 italic",children:"Geen vaardigheden opgegeven"})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Contactgegevens"}),e.jsx("div",{className:"bg-white rounded-md shadow-sm p-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Locatie"}),e.jsx("p",{className:"mt-1 text-gray-800",children:H})]}),s.email&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"E-mail"}),e.jsx("p",{className:"mt-1 text-gray-800",children:s.email})]}),s.phoneNumber&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Telefoonnummer"}),e.jsx("p",{className:"mt-1 text-gray-800",children:s.phoneNumber})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-8",children:[e.jsxs("button",{onClick:D,className:"flex-1 flex items-center justify-center py-2 px-4 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Afspraak maken"]}),e.jsxs("button",{onClick:z,className:"flex-1 flex items-center justify-center py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),"Chatten met ",s.name.split(" ")[0]]})]})]})})]})]}),e.jsx(V,{})]})};export{he as default};
//# sourceMappingURL=CandidateProfile-xdPqmNaH.js.map
