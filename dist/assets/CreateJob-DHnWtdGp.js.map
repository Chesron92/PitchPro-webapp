{"version":3,"file":"CreateJob-DHnWtdGp.js","sources":["../../src/pages/CreateJob.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { collection, addDoc, Timestamp, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../firebase/config';\nimport { useAuth } from '../contexts/AuthContext';\nimport Header from '../components/common/Header';\nimport { useForm } from 'react-hook-form';\n\ninterface JobFormData {\n  title: string;\n  company: string;\n  location: string;\n  description: string;\n  requirements: string;\n  salary: string;\n  isFullTime: boolean;\n  isRemote: boolean;\n}\n\nconst CreateJob: React.FC = () => {\n  const navigate = useNavigate();\n  const { currentUser, userProfile } = useAuth();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const { register, handleSubmit, formState: { errors } } = useForm<JobFormData>({\n    defaultValues: {\n      title: '',\n      company: userProfile?.profile?.company || userProfile?.companyName || '',\n      location: '',\n      description: '',\n      requirements: '',\n      salary: '',\n      isFullTime: true,\n      isRemote: false\n    }\n  });\n\n  const onSubmit = async (data: JobFormData) => {\n    if (!currentUser) {\n      setError('Je moet ingelogd zijn om een vacature te plaatsen');\n      return;\n    }\n\n    if (userProfile?.role !== 'recruiter') {\n      console.error('Gebruiker is geen recruiter, kan geen vacature plaatsen', userProfile);\n      setError('Alleen recruiters kunnen vacatures plaatsen');\n      return;\n    }\n\n    console.log('Vacature aanmaken voor gebruiker:', {\n      uid: currentUser.uid,\n      email: currentUser.email,\n      role: userProfile?.role\n    });\n\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      const jobsRef = collection(db, 'jobs');\n      \n      const now = new Date();\n      const timeStamp = {\n        seconds: Math.floor(now.getTime() / 1000),\n        nanoseconds: now.getMilliseconds() * 1000000\n      };\n\n      const newJob = {\n        ...data,\n        recruiterId: currentUser.uid,\n        userId: currentUser.uid,\n        createdAt: serverTimestamp(),\n        createdAtFallback: timeStamp,\n        updatedAt: serverTimestamp(),\n        updatedAtFallback: timeStamp,\n        status: 'active'\n      };\n\n      console.log('Nieuw vacature data om op te slaan:', newJob);\n\n      console.log('Firebase connection status check vóór toevoegen vacature');\n\n      const docRef = await addDoc(jobsRef, newJob);\n      console.log('Vacature toegevoegd met ID:', docRef.id);\n      \n      navigate(`/job/${docRef.id}`);\n    } catch (err) {\n      console.error('Fout bij het toevoegen van vacature:', err);\n      \n      let errorMessage = 'Er is een fout opgetreden bij het plaatsen van de vacature. ';\n      \n      if (err instanceof Error) {\n        console.error('Foutdetails:', err.message);\n        \n        if (err.message.includes('permission-denied')) {\n          errorMessage += 'Je hebt geen toestemming om vacatures te plaatsen. Controleer of je bent ingelogd als recruiter.';\n        } else if (err.message.includes('network')) {\n          errorMessage += 'Er lijkt een netwerkprobleem te zijn. Controleer je internetverbinding en probeer het opnieuw.';\n        } else {\n          errorMessage += 'Probeer het later opnieuw.';\n        }\n      } else {\n        errorMessage += 'Probeer het later opnieuw.';\n      }\n      \n      setError(errorMessage);\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate('/dashboard');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header />\n      \n      <div className=\"container mx-auto px-4 py-12 max-w-3xl\">\n        <div className=\"mb-6 flex items-center justify-between\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Nieuwe vacature plaatsen</h1>\n          <button \n            onClick={handleCancel}\n            className=\"text-gray-600 hover:text-gray-800\"\n          >\n            Annuleren\n          </button>\n        </div>\n        \n        {error && (\n          <div className=\"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\">\n            <p>{error}</p>\n          </div>\n        )}\n        \n        <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\n          <form onSubmit={handleSubmit(onSubmit)} className=\"p-6 space-y-6\">\n            {/* Functie titel */}\n            <div>\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Functietitel <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                {...register(\"title\", { required: \"Functietitel is verplicht\" })}\n                className={`w-full px-3 py-2 border ${errors.title ? 'border-red-500' : 'border-gray-300'} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`}\n                placeholder=\"bijv. Frontend Developer\"\n              />\n              {errors.title && (\n                <p className=\"mt-1 text-sm text-red-500\">{errors.title.message}</p>\n              )}\n            </div>\n            \n            {/* Bedrijfsnaam */}\n            <div>\n              <label htmlFor=\"company\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Bedrijfsnaam <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"company\"\n                {...register(\"company\", { required: \"Bedrijfsnaam is verplicht\" })}\n                className={`w-full px-3 py-2 border ${errors.company ? 'border-red-500' : 'border-gray-300'} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`}\n                placeholder=\"bijv. Tech Solutions BV\"\n              />\n              {errors.company && (\n                <p className=\"mt-1 text-sm text-red-500\">{errors.company.message}</p>\n              )}\n            </div>\n            \n            {/* Locatie */}\n            <div>\n              <label htmlFor=\"location\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Locatie <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"location\"\n                {...register(\"location\", { required: \"Locatie is verplicht\" })}\n                className={`w-full px-3 py-2 border ${errors.location ? 'border-red-500' : 'border-gray-300'} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`}\n                placeholder=\"bijv. Amsterdam\"\n              />\n              {errors.location && (\n                <p className=\"mt-1 text-sm text-red-500\">{errors.location.message}</p>\n              )}\n            </div>\n            \n            {/* Salarisindicatie */}\n            <div>\n              <label htmlFor=\"salary\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Salarisindicatie\n              </label>\n              <input\n                type=\"text\"\n                id=\"salary\"\n                {...register(\"salary\")}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\n                placeholder=\"bijv. €3000-€4000 per maand\"\n              />\n            </div>\n            \n            {/* Type aanstelling */}\n            <div className=\"flex flex-col md:flex-row gap-6\">\n              <div className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  id=\"isFullTime\"\n                  {...register(\"isFullTime\")}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"isFullTime\" className=\"ml-2 block text-sm text-gray-700\">\n                  Fulltime\n                </label>\n              </div>\n              \n              <div className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  id=\"isRemote\"\n                  {...register(\"isRemote\")}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"isRemote\" className=\"ml-2 block text-sm text-gray-700\">\n                  Mogelijkheid tot thuiswerken\n                </label>\n              </div>\n            </div>\n            \n            {/* Functieomschrijving */}\n            <div>\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Functieomschrijving <span className=\"text-red-500\">*</span>\n              </label>\n              <textarea\n                id=\"description\"\n                {...register(\"description\", { required: \"Functieomschrijving is verplicht\" })}\n                rows={6}\n                className={`w-full px-3 py-2 border ${errors.description ? 'border-red-500' : 'border-gray-300'} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`}\n                placeholder=\"Beschrijf de functie, taken en verantwoordelijkheden...\"\n              ></textarea>\n              {errors.description && (\n                <p className=\"mt-1 text-sm text-red-500\">{errors.description.message}</p>\n              )}\n            </div>\n            \n            {/* Functie-eisen */}\n            <div>\n              <label htmlFor=\"requirements\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Functie-eisen\n              </label>\n              <textarea\n                id=\"requirements\"\n                {...register(\"requirements\")}\n                rows={4}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500\"\n                placeholder=\"Beschrijf de kennis, vaardigheden en ervaring die nodig zijn voor deze functie...\"\n              ></textarea>\n            </div>\n            \n            <div className=\"pt-4 flex justify-end space-x-4\">\n              <button\n                type=\"button\"\n                onClick={handleCancel}\n                className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\n              >\n                Annuleren\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center\"\n              >\n                {isSubmitting ? (\n                  <>\n                    <div className=\"animate-spin mr-2 h-4 w-4 border-t-2 border-b-2 border-white rounded-full\"></div>\n                    Bezig met opslaan...\n                  </>\n                ) : (\n                  'Vacature plaatsen'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateJob; "],"names":["CreateJob","navigate","useNavigate","currentUser","userProfile","useAuth","isSubmitting","setIsSubmitting","useState","error","setError","register","handleSubmit","errors","useForm","_a","onSubmit","data","jobsRef","collection","db","now","timeStamp","newJob","serverTimestamp","docRef","addDoc","err","errorMessage","handleCancel","jsxs","jsx","Header","Fragment"],"mappings":"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"}