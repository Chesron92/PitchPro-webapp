import{d as N,r as g,j as e}from"./react-vendor-BJ-6AA60.js";import{collection as w,serverTimestamp as j,addDoc as k}from"./firebase-firestore-CCnivBKz.js";import{u as F,H as S,d as A}from"./index-CVvBu09D.js";import{u as q}from"./form-vendor-DOrZhWSe.js";import"./firebase-app-CzzSlWfx.js";const z=()=>{var x;const l=N(),{currentUser:n,userProfile:r}=F(),[c,d]=g.useState(!1),[m,o]=g.useState(null),{register:s,handleSubmit:y,formState:{errors:t}}=q({defaultValues:{title:"",company:((x=r==null?void 0:r.profile)==null?void 0:x.company)||(r==null?void 0:r.companyName)||"",location:"",description:"",requirements:"",salary:"",isFullTime:!0,isRemote:!1}}),f=async v=>{if(!n){o("Je moet ingelogd zijn om een vacature te plaatsen");return}if((r==null?void 0:r.role)!=="recruiter"){console.error("Gebruiker is geen recruiter, kan geen vacature plaatsen",r),o("Alleen recruiters kunnen vacatures plaatsen");return}console.log("Vacature aanmaken voor gebruiker:",{uid:n.uid,email:n.email,role:r==null?void 0:r.role}),d(!0),o(null);try{const i=w(A,"jobs"),a=new Date,p={seconds:Math.floor(a.getTime()/1e3),nanoseconds:a.getMilliseconds()*1e6},b={...v,recruiterId:n.uid,userId:n.uid,createdAt:j(),createdAtFallback:p,updatedAt:j(),updatedAtFallback:p,status:"active"};console.log("Nieuw vacature data om op te slaan:",b),console.log("Firebase connection status check vóór toevoegen vacature");const h=await k(i,b);console.log("Vacature toegevoegd met ID:",h.id),l(`/job/${h.id}`)}catch(i){console.error("Fout bij het toevoegen van vacature:",i);let a="Er is een fout opgetreden bij het plaatsen van de vacature. ";i instanceof Error?(console.error("Foutdetails:",i.message),i.message.includes("permission-denied")?a+="Je hebt geen toestemming om vacatures te plaatsen. Controleer of je bent ingelogd als recruiter.":i.message.includes("network")?a+="Er lijkt een netwerkprobleem te zijn. Controleer je internetverbinding en probeer het opnieuw.":a+="Probeer het later opnieuw."):a+="Probeer het later opnieuw.",o(a),d(!1)}},u=()=>{l("/dashboard")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(S,{}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-3xl",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nieuwe vacature plaatsen"}),e.jsx("button",{onClick:u,className:"text-gray-600 hover:text-gray-800",children:"Annuleren"})]}),m&&e.jsx("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4",children:e.jsx("p",{children:m})}),e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("form",{onSubmit:y(f),className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Functietitel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"title",...s("title",{required:"Functietitel is verplicht"}),className:`w-full px-3 py-2 border ${t.title?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"bijv. Frontend Developer"}),t.title&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.title.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:["Bedrijfsnaam ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"company",...s("company",{required:"Bedrijfsnaam is verplicht"}),className:`w-full px-3 py-2 border ${t.company?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"bijv. Tech Solutions BV"}),t.company&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.company.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:["Locatie ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"location",...s("location",{required:"Locatie is verplicht"}),className:`w-full px-3 py-2 border ${t.location?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"bijv. Amsterdam"}),t.location&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.location.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Salarisindicatie"}),e.jsx("input",{type:"text",id:"salary",...s("salary"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"bijv. €3000-€4000 per maand"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isFullTime",...s("isFullTime"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isFullTime",className:"ml-2 block text-sm text-gray-700",children:"Fulltime"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isRemote",...s("isRemote"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isRemote",className:"ml-2 block text-sm text-gray-700",children:"Mogelijkheid tot thuiswerken"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:["Functieomschrijving ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",...s("description",{required:"Functieomschrijving is verplicht"}),rows:6,className:`w-full px-3 py-2 border ${t.description?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"Beschrijf de functie, taken en verantwoordelijkheden..."}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"requirements",className:"block text-sm font-medium text-gray-700 mb-1",children:"Functie-eisen"}),e.jsx("textarea",{id:"requirements",...s("requirements"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Beschrijf de kennis, vaardigheden en ervaring die nodig zijn voor deze functie..."})]}),e.jsxs("div",{className:"pt-4 flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Annuleren"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-t-2 border-b-2 border-white rounded-full"}),"Bezig met opslaan..."]}):"Vacature plaatsen"})]})]})})]})]})};export{z as default};
//# sourceMappingURL=CreateJob-DHnWtdGp.js.map
