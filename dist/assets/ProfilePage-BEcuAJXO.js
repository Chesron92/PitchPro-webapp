import{r as h,j as e,L as we,u as ze}from"./react-vendor-wqxTS4Az.js";import{s as Le,d as Q,a as ce,u as Se,e as Te,i as Oe}from"./index-1iGq18Ep.js";import{u as fe,a as se,C as Ee}from"./form-vendor-Esn1dlm-.js";import{doc as ee,getDoc as ke,Timestamp as te,setDoc as We,updateDoc as me,serverTimestamp as ue}from"./firebase-firestore-CCnivBKz.js";import{ref as he,uploadBytes as ge,getDownloadURL as be,getStorage as xe}from"./firebase-storage-CqamIgiF.js";/* empty css                    */import"./firebase-app-CzzSlWfx.js";const Ie=({currentCvUrl:r,userId:v,onUploadSuccess:x,onUploadError:b})=>{const[f,B]=h.useState(!1),[V,y]=h.useState(0),[D,A]=h.useState(null),m=h.useRef(null),W=p=>{try{const z=p.split("/");return z[z.length-1].split("?")[0]}catch{return"cv-bestand"}},F=p=>{p.target.files&&p.target.files.length>0&&A(p.target.files[0])},d=async()=>{if(!D||!v){b("Geen bestand geselecteerd of gebruiker niet ingelogd");return}try{B(!0),y(0);const p=D.name.split(".").pop()||"pdf",z=`cv_${v}_${Date.now()}.${p}`,g=he(Le,`cv/${z}`);await ge(g,D),y(100);const n=await be(g);x(n),m.current&&(m.current.value=""),A(null)}catch(p){console.error("Fout bij uploaden van CV:",p),b("Er is een fout opgetreden bij het uploaden van je CV. Probeer het opnieuw.")}finally{B(!1)}};return e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"CV Uploaden"}),r&&e.jsxs("div",{className:"mb-4 p-3 bg-white rounded border border-gray-300",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Huidige CV:"}),e.jsx("div",{className:"flex items-center justify-between mt-1",children:e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),W(r)]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload een nieuw CV bestand"}),e.jsx("input",{ref:m,type:"file",onChange:F,className:`block w-full text-sm text-gray-500
            file:mr-4 file:py-2 file:px-4
            file:rounded-md file:border-0
            file:text-sm file:font-medium
            file:bg-primary-50 file:text-primary-700
            hover:file:bg-primary-100`,accept:".pdf,.doc,.docx",disabled:f}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ondersteunde formaten: PDF, DOC, DOCX (max. 5MB)"})]}),D&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Geselecteerd bestand: ",e.jsx("span",{className:"font-medium",children:D.name})," (",Math.round(D.size/1024)," KB)"]}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("button",{onClick:d,disabled:f,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:f?"Bezig met uploaden...":"CV uploaden"}),f&&e.jsx("div",{className:"ml-4 w-full max-w-xs",children:e.jsx("div",{className:"h-2 rounded-full bg-gray-200",children:e.jsx("div",{className:"h-2 rounded-full bg-primary-600",style:{width:`${V}%`}})})})]})]})]})},Je=({cvUrl:r})=>{var B;const[v,x]=h.useState(!1);if(!r)return e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"CV Bekijken"}),e.jsx("div",{children:e.jsxs(we,{to:"/dashboard/cv-preview",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Bekijk Gedetailleerd CV"]})})]});const f=((B=r.split(".").pop())==null?void 0:B.toLowerCase())==="pdf";return e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium",children:"CV Bekijken"}),e.jsx("button",{onClick:()=>x(!v),className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:v?"Verkleinen":"Vergroten"})]}),f?e.jsx("div",{className:`w-full ${v?"h-screen":"h-96"} border border-gray-300 rounded-md overflow-hidden bg-white`,children:e.jsx("iframe",{src:`${r}#toolbar=0`,className:"w-full h-full",title:"CV Preview"})}):e.jsxs("div",{className:"p-4 bg-white rounded-md border border-gray-300",children:[e.jsx("p",{className:"mb-3",children:"Dit document kan niet in de browser worden weergegeven. Klik op de knop hieronder om het te downloaden."}),e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download CV"]})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsxs(we,{to:"/dashboard/cv-preview",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Bekijk Gedetailleerd CV"]}),e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 text-sm font-medium flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),"Openen in nieuw venster"]})]})]})},X=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),$=r=>{if(!r)return null;if(r instanceof Date)return r;if(typeof r=="object"&&"seconds"in r)return new Date(r.seconds*1e3);if(typeof r=="number")return new Date(r);if(typeof r=="string"){const v=new Date(r);return isNaN(v.getTime())?null:v}return null},ie=({name:r,control:v,label:x,errors:b,isDisabled:f=!1,placeholder:B="Selecteer een datum",minDate:V,maxDate:y})=>e.jsxs("div",{children:[x&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:x}),e.jsx(Ee,{name:r,control:v,rules:{required:`${x||"Datum"} is verplicht`},render:({field:{onChange:D,onBlur:A,value:m,ref:W}})=>{let F=null;if(m)try{if(m instanceof Date)F=m;else if(typeof m=="object"&&m!==null&&"seconds"in m)F=new Date(m.seconds*1e3);else if(typeof m=="string"){const d=new Date(m);F=isNaN(d.getTime())?null:d}else typeof m=="number"&&(F=new Date(m))}catch(d){console.error(`Error converting date for ${r}:`,d),F=null}return e.jsx("input",{type:"date",onChange:d=>{const p=d.target.value?new Date(d.target.value):null;D(p)},onBlur:A,disabled:f,value:F?F.toISOString().split("T")[0]:"",className:`w-full px-3 py-2 border ${b&&b[r.split(".")[0]]?"border-red-500":"border-gray-300"} rounded-md`,"aria-invalid":b&&b[r.split(".")[0]]?"true":"false"})}}),b&&b[r.split(".")[0]]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:"Vul een geldige datum in"})]}),qe=({user:r,onSuccess:v,onError:x,setLoading:b})=>{const[f,B]=h.useState(!0),[V,y]=h.useState(null),[D,A]=h.useState("overMij"),[m,W]=h.useState(!1),F=h.useMemo(()=>({overMij:"",werkervaring:[],opleiding:[],stages:[],certificaten:[],talen:[],hobbys:[],vaardigheden:[]}),[]),{register:d,control:p,handleSubmit:z,reset:g,formState:{errors:n},getValues:ae,watch:a}=fe({defaultValues:F}),{fields:H,append:j,remove:U}=se({control:p,name:"certificaten"}),{fields:L,append:K,remove:T}=se({control:p,name:"opleiding"}),{fields:s,append:N,remove:P}=se({control:p,name:"stages"}),{fields:R,append:c,remove:O}=se({control:p,name:"werkervaring"}),{fields:M,append:re,remove:Z}=se({control:p,name:"talen"}),{fields:pe,append:je,remove:Ve}=se({control:p,name:"hobbys"}),{fields:ve,append:ye,remove:Fe}=se({control:p,name:"vaardigheden"});h.useEffect(()=>{(async()=>{if(!r.id){B(!1);return}try{const i=ee(Q,"users",r.id),C=await ke(i),l=ee(Q,"users",r.id,"cv","main"),S=await ke(l);let k={werkervaring:[],opleiding:[],stages:[],certificaten:[],talen:[],hobbys:[],vaardigheden:[]};if(C.exists()){const u=C.data();if(u.detailedCV){const t=u.detailedCV;k={...k,overMij:t.overMij||"",werkervaring:(t.werkervaring||[]).map(o=>({...o,startDatum:o.startDatum?$(o.startDatum):null,eindDatum:o.eindDatum?$(o.eindDatum):null,isHuidigeFunctie:!!o.isHuidigeFunctie})),opleiding:(t.opleiding||[]).map(o=>({...o,startDatum:o.startDatum?$(o.startDatum):null,eindDatum:o.eindDatum?$(o.eindDatum):null,isHuidigeOpleiding:!!o.isHuidigeOpleiding})),stages:(t.stages||[]).map(o=>({...o,startDatum:o.startDatum?$(o.startDatum):null,eindDatum:o.eindDatum?$(o.eindDatum):null,isHuidigeStage:!!o.isHuidigeStage})),certificaten:(t.certificaten||[]).map(o=>({id:o.id||X(),naam:o.naam||"",uitgever:o.uitgever||"",datum:o.datum?$(o.datum):null,beschrijving:o.beschrijving||""})),talen:Array.isArray(t.talen)?t.talen.map(o=>({...o,niveau:o.niveau||"Basis",beschrijving:o.beschrijving||""})):[],hobbys:Array.isArray(t.hobbys)?t.hobbys.map(o=>({...o,naam:o.naam||"",beschrijving:o.beschrijving||""})):[],vaardigheden:Array.isArray(t.vaardigheden)?t.vaardigheden.map(o=>({...o,type:o.type==="soft"||o.type==="hard"?o.type:"soft",niveau:typeof o.niveau=="number"?o.niveau:1,beschrijving:o.beschrijving||""})):[]}}else k={...k,werkervaring:(u.werkervaring||[]).map(t=>({...t,startDatum:t.startDatum?$(t.startDatum):null,eindDatum:t.eindDatum?$(t.eindDatum):null})),opleiding:(u.opleiding||[]).map(t=>({...t,startDatum:t.startDatum?$(t.startDatum):null,eindDatum:t.eindDatum?$(t.eindDatum):null})),stages:(u.stages||[]).map(t=>({...t,startDatum:t.startDatum?$(t.startDatum):null,eindDatum:t.eindDatum?$(t.eindDatum):null})),talen:u.talen||[],hobbys:Array.isArray(u.hobbys)?u.hobbys:[],vaardigheden:u.vaardigheden||[]}}if(S.exists()){const u=S.data();y(u),(!C.exists()||!C.data().detailedCV)&&(k={...k,overMij:u.overMij||"",werkervaring:(u.werkervaring||[]).map(t=>({...t,startDatum:t.startDatum?$(t.startDatum):null,eindDatum:t.eindDatum?$(t.eindDatum):null,isHuidigeFunctie:!!t.isHuidigeFunctie})),opleiding:(u.opleiding||[]).map(t=>({...t,startDatum:t.startDatum?$(t.startDatum):null,eindDatum:t.eindDatum?$(t.eindDatum):null,isHuidigeOpleiding:!!t.isHuidigeOpleiding})),stages:(u.stages||[]).map(t=>({...t,startDatum:t.startDatum?$(t.startDatum):null,eindDatum:t.eindDatum?$(t.eindDatum):null,isHuidigeStage:!!t.isHuidigeStage})),certificaten:(u.certificaten||[]).map(t=>({id:t.id||X(),naam:t.naam||"",uitgever:t.uitgever||"",datum:t.datum?$(t.datum):null,beschrijving:t.beschrijving||""})),talen:Array.isArray(u.talen)?u.talen.map(t=>({...t,niveau:t.niveau||"Basis",beschrijving:t.beschrijving||""})):[],hobbys:Array.isArray(u.hobbys)?u.hobbys.map(t=>({...t,naam:t.naam||"",beschrijving:t.beschrijving||""})):[],vaardigheden:Array.isArray(u.vaardigheden)?u.vaardigheden.map(t=>({...t,type:t.type==="soft"||t.type==="hard"?t.type:"soft",niveau:typeof t.niveau=="number"?t.niveau:1,beschrijving:t.beschrijving||""})):[]})}g(k)}catch(i){console.error("Fout bij ophalen gegevens:",i),x("Er is een fout opgetreden bij het ophalen van je gegevens")}finally{B(!1)}})()},[r.id,g,x]);const He=async w=>{if(!r.id){x("Gebruiker ID is niet beschikbaar");return}try{b(!0),W(!0),console.log("Form data being saved:",w);const i={overMij:w.overMij||"",werkervaring:w.werkervaring.map(l=>({id:l.id||X(),functie:l.functie||"",bedrijf:l.bedrijf||"",startDatum:l.startDatum?te.fromDate(l.startDatum):null,eindDatum:l.eindDatum?te.fromDate(l.eindDatum):null,beschrijving:l.beschrijving||"",isHuidigeFunctie:!!l.isHuidigeFunctie})),opleiding:w.opleiding.map(l=>({id:l.id||X(),opleiding:l.opleiding||"",instituut:l.instituut||"",startDatum:l.startDatum?te.fromDate(l.startDatum):null,eindDatum:l.eindDatum?te.fromDate(l.eindDatum):null,beschrijving:l.beschrijving||"",isHuidigeOpleiding:!!l.isHuidigeOpleiding})),stages:w.stages.map(l=>({id:l.id||X(),functie:l.functie||"",bedrijf:l.bedrijf||"",startDatum:l.startDatum?te.fromDate(l.startDatum):null,eindDatum:l.eindDatum?te.fromDate(l.eindDatum):null,beschrijving:l.beschrijving||"",isHuidigeStage:!!l.isHuidigeStage})),certificaten:w.certificaten.map(l=>({id:l.id||X(),naam:l.naam||"",uitgever:l.uitgever||"",datum:l.datum?te.fromDate(l.datum):null,beschrijving:l.beschrijving||""})),talen:w.talen.map(l=>({id:l.id||X(),taal:l.taal||"",niveau:l.niveau||"Basis",beschrijving:l.beschrijving||""})),hobbys:w.hobbys.map(l=>({id:l.id||X(),naam:l.naam||"",beschrijving:l.beschrijving||""})),vaardigheden:w.vaardigheden.map(l=>({id:l.id||X(),naam:l.naam||"",type:l.type==="soft"?"soft":"hard",niveau:typeof l.niveau=="number"?l.niveau:1,beschrijving:l.beschrijving||""}))};console.log("Saving CV data to Firestore:",i);const C=ee(Q,"users",r.id);await We(C,{detailedCV:i,updatedAt:new Date},{merge:!0}),console.log("CV data saved successfully"),v()}catch(i){console.error("Fout bij opslaan gegevens:",i),x("Er is een fout opgetreden bij het opslaan van je gegevens")}finally{b(!1),W(!1)}},Re=h.useCallback(()=>{setTimeout(()=>{j({id:String(Date.now()),naam:"",uitgever:"",datum:null,beschrijving:""})},0)},[j]),Be=h.useCallback(()=>{setTimeout(()=>{K({id:String(Date.now()),opleiding:"",instituut:"",beschrijving:"",startDatum:null,eindDatum:null,isHuidigeOpleiding:!1})},0)},[K]),$e=h.useCallback(()=>{setTimeout(()=>{N({id:String(Date.now()),bedrijf:"",functie:"",beschrijving:"",startDatum:null,eindDatum:null,isHuidigeStage:!1})},0)},[N]),Ae=h.useCallback(()=>{setTimeout(()=>{c({id:String(Date.now()),functie:"",bedrijf:"",startDatum:null,eindDatum:null,beschrijving:"",isHuidigeFunctie:!1})},0)},[c]),Ue=h.useCallback(()=>{setTimeout(()=>{re({id:String(Date.now()),taal:"",niveau:"Basis"})},0)},[re]),Me=h.useCallback(()=>{setTimeout(()=>{je({id:String(Date.now()),naam:""})},0)},[je]),Ne=h.useCallback(w=>{setTimeout(()=>{ye({id:String(Date.now()),naam:"",type:w,niveau:1})},0)},[ye]),Y=w=>{switch(w){case"overMij":return"Over mij";case"werkervaring":return"Werkervaring";case"opleiding":return"Opleiding";case"stages":return"Stages";case"certificaten":return"Certificaten";case"talen":return"Talen";case"hobbys":return"Hobby's";case"vaardigheden":return"Vaardigheden";default:return w}};return f?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"}),e.jsx("div",{className:"ml-4",children:"CV gegevens laden..."})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("form",{onSubmit:z(He),children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("overMij")}),e.jsx("div",{className:"bg-white rounded-lg",children:e.jsx("textarea",{...d("overMij"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:5,placeholder:"Vertel iets over jezelf, je motivie en ambities"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("werkervaring")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("button",{type:"button",onClick:Ae,className:"ml-auto px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"+ Toevoegen"})}),R.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen werkervaring toegevoegd."}),R.map((w,i)=>{var C,l,S,k,u,t,o,I,J,q,G,_,le,oe,ne,de;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Functie"}),e.jsx("input",{...d(`werkervaring.${i}.functie`,{required:"Functie is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.werkervaring)==null?void 0:C[i])!=null&&l.functie?"true":"false"}),((k=(S=n.werkervaring)==null?void 0:S[i])==null?void 0:k.functie)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:typeof((t=(u=n.werkervaring[i])==null?void 0:u.functie)==null?void 0:t.message)=="string"?(I=(o=n.werkervaring[i])==null?void 0:o.functie)==null?void 0:I.message:"Functie is verplicht"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrijf"}),e.jsx("input",{...d(`werkervaring.${i}.bedrijf`,{required:"Bedrijf is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(q=(J=n.werkervaring)==null?void 0:J[i])!=null&&q.bedrijf?"true":"false"}),((_=(G=n.werkervaring)==null?void 0:G[i])==null?void 0:_.bedrijf)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:typeof((oe=(le=n.werkervaring[i])==null?void 0:le.bedrijf)==null?void 0:oe.message)=="string"?(de=(ne=n.werkervaring[i])==null?void 0:ne.bedrijf)==null?void 0:de.message:"Bedrijf is verplicht"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx(ie,{name:`werkervaring.${i}.startDatum`,control:p,label:"Startdatum",errors:n})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Einddatum"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("input",{type:"checkbox",...d(`werkervaring.${i}.isHuidigeFunctie`),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Huidige functie"})]})]}),e.jsx(ie,{name:`werkervaring.${i}.eindDatum`,control:p,label:"",errors:n,isDisabled:!!a(`werkervaring.${i}.isHuidigeFunctie`)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beschrijving"}),e.jsx("textarea",{...d(`werkervaring.${i}.beschrijving`),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Beschrijf je taken en verantwoordelijkheden"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>O(i),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md",children:"Verwijderen"})})]},w.id)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("opleiding")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("button",{type:"button",onClick:Be,className:"ml-auto px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"+ Toevoegen"})}),L.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen opleidingen toegevoegd."}),L.map((w,i)=>{var C,l,S,k,u,t,o,I,J,q,G,_;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opleidingsnaam"}),e.jsx("input",{...d(`opleiding.${i}.opleiding`,{required:"Opleidingsnaam is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.opleiding)==null?void 0:C[i])!=null&&l.opleiding?"true":"false"}),((k=(S=n.opleiding)==null?void 0:S[i])==null?void 0:k.opleiding)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(t=(u=n.opleiding[i])==null?void 0:u.opleiding)==null?void 0:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Onderwijsinstelling"}),e.jsx("input",{...d(`opleiding.${i}.instituut`,{required:"Onderwijsinstelling is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(I=(o=n.opleiding)==null?void 0:o[i])!=null&&I.instituut?"true":"false"}),((q=(J=n.opleiding)==null?void 0:J[i])==null?void 0:q.instituut)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(_=(G=n.opleiding[i])==null?void 0:G.instituut)==null?void 0:_.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx(ie,{name:`opleiding.${i}.startDatum`,control:p,label:"Startdatum",errors:n})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Einddatum"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("input",{type:"checkbox",...d(`opleiding.${i}.isHuidigeOpleiding`),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Huidige opleiding"})]})]}),e.jsx(ie,{name:`opleiding.${i}.eindDatum`,control:p,label:"",errors:n,isDisabled:!!a(`opleiding.${i}.isHuidigeOpleiding`)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beschrijving"}),e.jsx("textarea",{...d(`opleiding.${i}.beschrijving`),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Beschrijf de opleiding en relevante informatie"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>T(i),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md",children:"Verwijderen"})})]},w.id)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("stages")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("button",{type:"button",onClick:$e,className:"ml-auto px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"+ Toevoegen"})}),s.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen stages toegevoegd."}),s.map((w,i)=>{var C,l,S,k,u,t,o,I,J,q,G,_;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Functie"}),e.jsx("input",{...d(`stages.${i}.functie`,{required:"Functie is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.stages)==null?void 0:C[i])!=null&&l.functie?"true":"false"}),((k=(S=n.stages)==null?void 0:S[i])==null?void 0:k.functie)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(t=(u=n.stages[i])==null?void 0:u.functie)==null?void 0:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrijf"}),e.jsx("input",{...d(`stages.${i}.bedrijf`,{required:"Bedrijf is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(I=(o=n.stages)==null?void 0:o[i])!=null&&I.bedrijf?"true":"false"}),((q=(J=n.stages)==null?void 0:J[i])==null?void 0:q.bedrijf)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(_=(G=n.stages[i])==null?void 0:G.bedrijf)==null?void 0:_.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{children:e.jsx(ie,{name:`stages.${i}.startDatum`,control:p,label:"Startdatum",errors:n})}),e.jsx("div",{children:e.jsx(ie,{name:`stages.${i}.eindDatum`,control:p,label:"Einddatum",errors:n})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beschrijving"}),e.jsx("textarea",{...d(`stages.${i}.beschrijving`),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Beschrijf je stage en verantwoordelijkheden"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>P(i),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md",children:"Verwijderen"})})]},w.id)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("certificaten")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("button",{type:"button",onClick:Re,className:"ml-auto px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"+ Toevoegen"})}),H.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen certificaten toegevoegd."}),H.map((w,i)=>{var C,l,S,k,u,t,o,I,J,q,G,_,le,oe,ne,de;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("h3",{className:"font-medium",children:["Certificaat ",i+1]}),e.jsx("button",{type:"button",onClick:()=>U(i),className:"text-red-500 px-2 py-1 rounded hover:bg-red-100",children:"X"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam certificaat"}),e.jsx("input",{...d(`certificaten.${i}.naam`,{required:"Naam certificaat is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.certificaten)==null?void 0:C[i])!=null&&l.naam?"true":"false"}),((k=(S=n.certificaten)==null?void 0:S[i])==null?void 0:k.naam)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:typeof((t=(u=n.certificaten[i])==null?void 0:u.naam)==null?void 0:t.message)=="string"?(I=(o=n.certificaten[i])==null?void 0:o.naam)==null?void 0:I.message:"Naam certificaat is verplicht"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uitgever"}),e.jsx("input",{...d(`certificaten.${i}.uitgever`,{required:"Uitgever is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(q=(J=n.certificaten)==null?void 0:J[i])!=null&&q.uitgever?"true":"false"}),((_=(G=n.certificaten)==null?void 0:G[i])==null?void 0:_.uitgever)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:typeof((oe=(le=n.certificaten[i])==null?void 0:le.uitgever)==null?void 0:oe.message)=="string"?(de=(ne=n.certificaten[i])==null?void 0:ne.uitgever)==null?void 0:de.message:"Uitgever is verplicht"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsx("div",{children:e.jsx(ie,{name:`certificaten.${i}.datum`,control:p,label:"Datum",errors:n})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beschrijving"}),e.jsx("textarea",{...d(`certificaten.${i}.beschrijving`),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Beschrijf het certificaat en relevante informatie"})]})]},w.id)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("talen")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("button",{type:"button",onClick:Ue,className:"ml-auto px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"+ Toevoegen"})}),M.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen talen toegevoegd."}),M.map((w,i)=>{var C,l,S,k,u,t;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Taal"}),e.jsx("input",{...d(`talen.${i}.taal`,{required:"Taal is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.talen)==null?void 0:C[i])!=null&&l.taal?"true":"false"}),((k=(S=n.talen)==null?void 0:S[i])==null?void 0:k.taal)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(t=(u=n.talen[i])==null?void 0:u.taal)==null?void 0:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau"}),e.jsxs("select",{...d(`talen.${i}.niveau`),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"Basis",children:"Basis"}),e.jsx("option",{value:"Gemiddeld",children:"Gemiddeld"}),e.jsx("option",{value:"Goed",children:"Goed"}),e.jsx("option",{value:"Vloeiend",children:"Vloeiend"}),e.jsx("option",{value:"Moedertaal",children:"Moedertaal"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>Z(i),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md",children:"Verwijderen"})})]},w.id)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("hobbys")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("button",{type:"button",onClick:Me,className:"ml-auto px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"+ Toevoegen"})}),pe.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen hobby's toegevoegd."}),pe.map((w,i)=>{var C,l,S,k,u,t;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam"}),e.jsx("input",{...d(`hobbys.${i}.naam`,{required:"Naam is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.hobbys)==null?void 0:C[i])!=null&&l.naam?"true":"false"}),((k=(S=n.hobbys)==null?void 0:S[i])==null?void 0:k.naam)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(t=(u=n.hobbys[i])==null?void 0:u.naam)==null?void 0:t.message})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>Ve(i),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md",children:"Verwijderen"})})]},w.id)})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:Y("vaardigheden")}),e.jsxs("div",{className:"bg-white rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{children:[e.jsx("button",{type:"button",onClick:()=>Ne("soft"),className:"mr-2 px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"Soft Skills"}),e.jsx("button",{type:"button",onClick:()=>Ne("hard"),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-md",children:"Hard Skills"})]})}),ve.length===0&&e.jsx("p",{className:"text-gray-500 italic mb-4",children:"Nog geen vaardigheden toegevoegd."}),ve.map((w,i)=>{var C,l,S,k,u,t;return e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam"}),e.jsx("input",{...d(`vaardigheden.${i}.naam`,{required:"Naam is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md","aria-invalid":(l=(C=n.vaardigheden)==null?void 0:C[i])!=null&&l.naam?"true":"false"}),((k=(S=n.vaardigheden)==null?void 0:S[i])==null?void 0:k.naam)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:(t=(u=n.vaardigheden[i])==null?void 0:u.naam)==null?void 0:t.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{...d(`vaardigheden.${i}.type`),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"soft",children:"Soft Skill"}),e.jsx("option",{value:"hard",children:"Hard Skill"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau"}),e.jsx("input",{...d(`vaardigheden.${i}.niveau`,{setValueAs:o=>typeof o=="string"?parseInt(o,10)||0:o}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",type:"number",min:"1",max:"5"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>Fe(i),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md",children:"Verwijderen"})})]},w.id)})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md",children:m?"Opslaan...":"Opslaan"})})]}),r.role==="recruiter"&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("a",{href:"/schedule-meeting",className:"inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Nieuwe afspraak plannen"]})})]})},Ge=({user:r,onSuccess:v,onError:x,setLoading:b})=>{var L,K,T;const{register:f,handleSubmit:B,reset:V,setValue:y,watch:D,formState:{errors:A}}=fe(),[m,W]=h.useState(((L=r.profile)==null?void 0:L.cv)||r.cv||""),[F,d]=h.useState(((K=r.profile)==null?void 0:K.profilePhoto)||r.profilePhoto||""),[p,z]=h.useState(((T=r.profile)==null?void 0:T.pitchVideo)||r.pitchVideo||""),[g,n]=h.useState(!1),ae=D("isAvailableForWork");h.useEffect(()=>{n(!!ae)},[ae]),h.useEffect(()=>{console.log("User profiel bijgewerkt, formulier resetten",JSON.stringify(r,null,2));const s={displayName:"",phoneNumber:"",street:"",houseNumber:"",postalCode:"",city:"",country:"",skills:"",availability:"",cv:"",linkedin:"",portfolio:"",experience:"",education:"",profilePhoto:"",isAvailableForWork:!1,pitchVideo:""};if(s.displayName=r.displayName||"",s.phoneNumber=r.phoneNumber||r.phone||"",s.street=r.street||"",s.houseNumber=r.houseNumber||"",s.postalCode=r.postalCode||"",s.city=r.city||"",s.country=r.country||"",r.address&&typeof r.address=="object"){const c=r.address;s.street||(s.street=c.street||""),s.houseNumber||(s.houseNumber=c.houseNumber||""),s.postalCode||(s.postalCode=c.postalCode||""),s.city||(s.city=c.city||""),s.country||(s.country=c.country||"")}if(r.profile){if(console.log("Profielgegevens gevonden:",JSON.stringify(r.profile,null,2)),r.profile.address&&typeof r.profile.address=="object"){const O=r.profile.address;s.street||(s.street=O.street||""),s.houseNumber||(s.houseNumber=O.houseNumber||""),s.postalCode||(s.postalCode=O.postalCode||""),s.city||(s.city=O.city||""),s.country||(s.country=O.country||"")}const c=r.profile;c.skills&&(s.skills=Array.isArray(c.skills)?c.skills.join(", "):typeof c.skills=="string"?c.skills:""),s.availability=c.availability||"",s.isAvailableForWork=c.isAvailableForWork===!0,n(c.isAvailableForWork===!0),s.cv=c.cv||"",s.linkedin=c.linkedin||"",s.portfolio=c.portfolio||"",c.experience&&(s.experience=typeof c.experience=="string"?c.experience:Array.isArray(c.experience)?JSON.stringify(c.experience):""),c.education&&(s.education=Array.isArray(c.education)?c.education.join(", "):typeof c.education=="string"?c.education:""),c.profilePhoto&&(d(c.profilePhoto),s.profilePhoto=c.profilePhoto),c.pitchVideo&&(z(c.pitchVideo),s.pitchVideo=c.pitchVideo)}const N=r.profilePhoto||r.photoURL||(r.profile&&r.profile.profilePhoto?r.profile.profilePhoto:"");N&&(console.log("Profielfoto URL gevonden:",N),d(N),s.profilePhoto=N);const P=r.cv||(r.profile&&r.profile.cv?r.profile.cv:"");P&&(W(P),s.cv=P);const R=r.pitchVideo||(r.profile&&r.profile.pitchVideo?r.profile.pitchVideo:"");R&&(z(R),s.pitchVideo=R),console.log("Formulier reset met waarden:",s),V(s)},[r,V]);const a=s=>{W(s),y("cv",s)},H=async s=>{try{b(!0);const N=xe(),P=ce.currentUser;if(!P)throw new Error("Je bent niet ingelogd. Log opnieuw in om je profielfoto te uploaden.");const c=`profile-${new Date().getTime()}-${s.name}`,O=he(N,`profile-photos/${P.uid}/${c}`);console.log("Profielfoto uploaden naar:",`profile-photos/${P.uid}/${c}`),await ge(O,s),console.log("Profielfoto geüpload, nu de download URL ophalen");const M=await be(O);console.log("Profielfoto URL ontvangen:",M),d(M),y("profilePhoto",M);const re=ee(Q,"users",P.uid);return await me(re,{profilePhoto:M,photoURL:M,"profile.profilePhoto":M,updatedAt:ue()}),console.log("Profielfoto succesvol bijgewerkt in profiel"),M}catch(N){throw console.error("Fout bij uploaden profielfoto:",N),x("Er is een fout opgetreden bij het uploaden van je profielfoto. Probeer het later opnieuw."),N}finally{b(!1)}},j=async s=>{try{b(!0);const N=xe(),P=ce.currentUser;if(!s)throw new Error("Geen bestand geselecteerd.");if(!P)throw new Error("Je bent niet ingelogd. Log opnieuw in om je video te uploaden.");const R=100,c=R*1024*1024;if(s.size>c)throw new Error(`Video is te groot. Maximale grootte is ${R}MB.`);const M=`pitch-${new Date().getTime()}-${s.name}`,re=he(N,`pitch-videos/${P.uid}/${M}`);console.log("Video uploaden naar:",`pitch-videos/${P.uid}/${M}`),await ge(re,s),console.log("Video geüpload, nu de download URL ophalen");const Z=await be(re);console.log("Video URL ontvangen:",Z),z(Z),y("pitchVideo",Z);const pe=ee(Q,"users",P.uid);return await me(pe,{pitchVideo:Z,"profile.pitchVideo":Z,updatedAt:ue()}),console.log("Video succesvol bijgewerkt in profiel"),Z}catch(N){throw console.error("Fout bij uploaden video:",N),x("Er is een fout opgetreden bij het uploaden van je video. Probeer het later opnieuw."),N}finally{b(!1)}},U=async s=>{if(!ce.currentUser){x("Je bent niet ingelogd. Log opnieuw in om je profiel op te slaan.");return}console.log("Profielgegevens worden opgeslagen:",s),b(!0);try{const N=ce.currentUser.uid,P=ee(Q,"users",N),R={street:s.street||"",houseNumber:s.houseNumber||"",postalCode:s.postalCode||"",city:s.city||"",country:s.country||""},c={address:R,skills:s.skills?s.skills.split(",").map(M=>M.trim()):[],availability:s.availability||"",isAvailableForWork:s.isAvailableForWork===!0,cv:m||s.cv||"",linkedin:s.linkedin||"",portfolio:s.portfolio||"",experience:s.experience||"",education:s.education?s.education.split(",").map(M=>M.trim()):[],profilePhoto:F||s.profilePhoto||"",pitchVideo:p||s.pitchVideo||""},O={displayName:s.displayName||"",phoneNumber:s.phoneNumber||"",phone:s.phoneNumber||"",photoURL:c.profilePhoto,street:R.street,houseNumber:R.houseNumber,postalCode:R.postalCode,city:R.city,country:R.country,address:R,profile:c,profilePhoto:c.profilePhoto,cv:c.cv,pitchVideo:c.pitchVideo,updatedAt:ue()};console.log("Bijgewerkte gebruikersgegevens die worden opgeslagen:",JSON.stringify(O,null,2)),await me(P,O),console.log("Profiel succesvol bijgewerkt"),b(!1),y("street",s.street||""),y("houseNumber",s.houseNumber||""),y("postalCode",s.postalCode||""),y("city",s.city||""),y("country",s.country||""),y("phoneNumber",s.phoneNumber||""),v()}catch(N){console.error("Fout bij het bijwerken van profiel:",N),b(!1),x(N instanceof Error?N.message:"Er is een onbekende fout opgetreden")}};return e.jsx("div",{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("form",{onSubmit:B(U),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Persoonlijke gegevens"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profielfoto"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[F?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:F,alt:"Profielfoto",className:"w-20 h-20 rounded-full object-cover border-2 border-primary-500",onError:s=>{console.error("Fout bij laden profielfoto:",s),s.target.src="https://via.placeholder.com/80?text=Foto"}}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center cursor-pointer",onClick:()=>{d(""),y("profilePhoto","")},children:"×"})]}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var P;const N=(P=s.target.files)==null?void 0:P[0];N&&H(N).then(()=>console.log("Profielfoto succesvol bijgewerkt")).catch(R=>console.error("Fout bij uploaden:",R))},className:"hidden",id:"profilePhoto"}),e.jsxs("label",{htmlFor:"profilePhoto",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Foto uploaden"]}),F&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Profielfoto succesvol geladen"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam"}),e.jsx("input",{type:"text",...f("displayName",{required:"Naam is verplicht"}),className:`w-full px-3 py-2 border rounded-md ${A.displayName?"border-red-500":"border-gray-300"}`}),A.displayName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:A.displayName.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefoonnummer"}),e.jsx("input",{type:"tel",...f("phoneNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Adresgegevens"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Straat"}),e.jsx("input",{type:"text",...f("street"),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Huisnummer"}),e.jsx("input",{type:"text",...f("houseNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),e.jsx("input",{type:"text",...f("postalCode"),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plaats"}),e.jsx("input",{type:"text",...f("city"),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Land"}),e.jsx("input",{type:"text",...f("country"),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"mt-8 mb-8",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Curriculum Vitae Document"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Hieronder kun je een CV-document uploaden dat recruiters kunnen downloaden. Ondersteunde formaten zijn PDF, DOC en DOCX."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(Ie,{currentCvUrl:m,userId:r.id,onUploadSuccess:a,onUploadError:s=>x(s)}),e.jsx("input",{type:"hidden",...f("cv")})]}),e.jsx("div",{children:e.jsx(Je,{cvUrl:m})})]})]}),e.jsxs("div",{className:"mt-8 mb-8",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Professionele informatie"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beschikbaarheid"}),e.jsxs("select",{...f("availability"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Selecteer beschikbaarheid"}),e.jsx("option",{value:"Fulltime",children:"Fulltime"}),e.jsx("option",{value:"Parttime",children:"Parttime"}),e.jsx("option",{value:"Freelance",children:"Freelance"}),e.jsx("option",{value:"Stage",children:"Stage"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[e.jsx("label",{htmlFor:"isAvailableForWork",className:"block text-sm font-medium text-gray-700 cursor-pointer",onClick:()=>{const s=!g;n(s),y("isAvailableForWork",s)},children:"Beschikbaar voor werk"}),e.jsxs("div",{className:"relative inline-block w-14 mr-2 align-middle select-none",children:[e.jsx("input",{type:"checkbox",id:"isAvailableForWork",...f("isAvailableForWork"),className:"sr-only",onChange:s=>{y("isAvailableForWork",s.target.checked),n(s.target.checked)}}),e.jsx("div",{className:`toggle-bg block h-8 rounded-full cursor-pointer w-14 transition-colors duration-200 ease-in-out ${g?"bg-primary-600":"bg-gray-200"}`,onClick:()=>{const s=!g;n(s),y("isAvailableForWork",s)}}),e.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full shadow transition-transform duration-200 ease-in-out ${g?"transform translate-x-6":""}`})]}),e.jsx("span",{className:"text-sm text-gray-500 cursor-pointer",onClick:()=>{const s=!g;n(s),y("isAvailableForWork",s)},children:"Recruiters kunnen je profiel zien als dit is ingeschakeld"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"url",...f("linkedin"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://linkedin.com/in/jouwprofiel"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio URL"}),e.jsx("input",{type:"url",...f("portfolio"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://jouwportfolio.com"})]})]})]}),e.jsxs("div",{className:"mt-8 mb-8",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Video Pitch"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload een korte video (max. 1,5 minuut) waarin je jezelf voorstelt aan recruiters. Vertel iets over je ervaring, motivatie en waarom je geschikt bent voor je droombaan."}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecteer een videobestand (max. 1,5 minuut)"}),e.jsx("input",{type:"file",accept:"video/*",onChange:s=>{var P;const N=(P=s.target.files)==null?void 0:P[0];N&&j(N).then(()=>console.log("Video succesvol geüpload")).catch(R=>console.error("Fout bij uploaden:",R))},className:"hidden",id:"pitchVideo"}),e.jsx("label",{htmlFor:"pitchVideo",className:"cursor-pointer flex items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary-500 transition-colors duration-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-primary-600",children:"Sleep je video hierheen of klik om te selecteren"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"MP4, MOV, WEBM of AVI (max. 100MB)"})]})})]}),e.jsx("input",{type:"hidden",...f("pitchVideo")})]}),e.jsx("div",{className:"md:w-1/2",children:p?e.jsxs("div",{className:"rounded-lg overflow-hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video preview"}),e.jsx("video",{controls:!0,className:"w-full h-auto border border-gray-200 rounded-lg shadow-sm",src:p,children:"Je browser ondersteunt geen video weergave."}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Video succesvol geüpload!"}),e.jsx("button",{type:"button",onClick:()=>{z(""),y("pitchVideo","")},className:"text-sm text-red-600 hover:text-red-800",children:"Verwijderen"})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full border border-gray-200 rounded-lg bg-white p-6",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2",children:"Nog geen video geüpload."}),e.jsx("p",{className:"mt-1 text-xs",children:"Upload een video om deze hier te bekijken."})]})})})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Je video pitch is een krachtige manier om jezelf te presenteren. Houd je video kort (max. 1,5 minuut) en vertel iets over je ervaring, persoonlijkheid en wat je uniek maakt. Zorg voor een rustige omgeving en goede belichting voor de beste indruk."})})]})})]})]}),e.jsx("div",{className:"mt-6 mb-10",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Basisprofiel opslaan"})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-8 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Uitgebreid CV"}),e.jsx("div",{className:"ml-4 flex-1 border-t border-gray-200"})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-8",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Hieronder kun je een gedetailleerd CV maken met specifieke informatie over je werkervaring, opleidingen, stages, certificaten, talen en hobby's. Deze informatie wordt opgeslagen in je profiel en is zichtbaar voor recruiters."})})]})})]}),e.jsx(qe,{user:r,onSuccess:v,onError:x,setLoading:b})]})})},De=r=>{try{const v=localStorage.getItem(`recruiterForm_${r}`);return v?JSON.parse(v):{}}catch(v){return console.error("Fout bij ophalen formuliergegevens uit localStorage:",v),{}}},Ce=(r,v)=>{try{localStorage.setItem(`recruiterForm_${r}`,JSON.stringify(v))}catch(x){console.error("Fout bij opslaan formuliergegevens in localStorage:",x)}},E={},_e=({user:r,onSuccess:v,onError:x,setLoading:b})=>{const[f,B]=h.useState({}),[V,y]=h.useState(!1),[D,A]=h.useState(""),{register:m,handleSubmit:W,reset:F,formState:{errors:d},setValue:p,getValues:z}=fe({shouldUnregister:!1,defaultValues:f,mode:"onChange"}),g=(a,H)=>{if(E[a]=H,r.id){const j=De(r.id);Ce(r.id,{...j,[a]:H})}};h.useEffect(()=>{if(!r||!r.id)return;const a=r.profile||{},H=r.id?De(r.id):{},j=V?{}:H,U={displayName:j.displayName||E.displayName||r.displayName||"",phoneNumber:j.phoneNumber||E.phoneNumber||r.phoneNumber||"",companyName:j.companyName||E.companyName||r.companyName||a.company||"",position:j.position||E.position||a.position||"",companyLogo:j.companyLogo||E.companyLogo||a.companyLogo||"",companyWebsite:j.companyWebsite||E.companyWebsite||a.companyWebsite||"",companyDescription:j.companyDescription||E.companyDescription||a.companyDescription||"",companyStreet:j.companyStreet||E.companyStreet||r.companyStreet||"",companyHouseNumber:j.companyHouseNumber||E.companyHouseNumber||r.companyHouseNumber||"",companyPostalCode:j.companyPostalCode||E.companyPostalCode||r.companyPostalCode||"",companyCity:j.companyCity||E.companyCity||r.companyCity||"",kvkNumber:j.kvkNumber||E.kvkNumber||r.kvkNumber||a.kvkNumber||"",profilePhoto:j.profilePhoto||E.profilePhoto||r.profilePhoto||a.profilePhoto||""},L=r.profilePhoto||r.photoURL||(r.profile&&r.profile.profilePhoto?r.profile.profilePhoto:"");L&&(console.log("Profielfoto URL gevonden:",L),A(L),U.profilePhoto=L),B(U),F(U),Object.entries(U).forEach(([K,T])=>{T&&p(K,T)}),V&&y(!1),console.log("Formulier reset met waarden:",U)},[r,F,p,V]);const n=async a=>{try{b(!0);const H=xe(),j=ce.currentUser;if(!j)throw new Error("Je bent niet ingelogd. Log opnieuw in om je profielfoto te uploaden.");const L=`profile-${new Date().getTime()}-${a.name}`,K=he(H,`profile-photos/${j.uid}/${L}`);console.log("Profielfoto uploaden naar:",`profile-photos/${j.uid}/${L}`),await ge(K,a),console.log("Profielfoto geüpload, nu de download URL ophalen");const T=await be(K);console.log("Profielfoto URL ontvangen:",T),A(T),p("profilePhoto",T);const s=ee(Q,"users",j.uid);return await me(s,{profilePhoto:T,photoURL:T,"profile.profilePhoto":T,updatedAt:ue()}),console.log("Profielfoto succesvol bijgewerkt in profiel"),T}catch(H){throw console.error("Fout bij uploaden profielfoto:",H),x("Er is een fout opgetreden bij het uploaden van je profielfoto. Probeer het later opnieuw."),H}finally{b(!1)}},ae=async a=>{try{b(!0),Object.keys(a).forEach(U=>{g(U,a[U])}),r.id&&Ce(r.id,a);const H={...r,displayName:a.displayName,phoneNumber:a.phoneNumber,phone:a.phoneNumber,profilePhoto:D||a.profilePhoto||"",photoURL:D||a.profilePhoto||"",companyName:a.companyName,companyStreet:a.companyStreet,companyHouseNumber:a.companyHouseNumber,companyPostalCode:a.companyPostalCode,companyCity:a.companyCity,kvkNumber:a.kvkNumber,address:{street:a.companyStreet,houseNumber:a.companyHouseNumber,postalCode:a.companyPostalCode,city:a.companyCity},profile:{...r.profile||{},company:a.companyName,position:a.position,companyLogo:a.companyLogo,companyWebsite:a.companyWebsite,companyDescription:a.companyDescription,kvkNumber:a.kvkNumber,phoneNumber:a.phoneNumber,phone:a.phoneNumber,profilePhoto:D||a.profilePhoto||"",address:{street:a.companyStreet,houseNumber:a.companyHouseNumber,postalCode:a.companyPostalCode,city:a.companyCity},companyStreet:a.companyStreet,companyHouseNumber:a.companyHouseNumber,companyPostalCode:a.companyPostalCode,companyCity:a.companyCity},updatedAt:ue()};if(!r.id)throw new Error("Gebruiker ID is niet beschikbaar");console.log("Gebruikersdata die wordt opgeslagen:",JSON.stringify(H,null,2));const j=ee(Q,"users",r.id);await me(j,H),y(!0),setTimeout(()=>{Object.entries(a).forEach(([U,L])=>{p(U,L)})},200),v()}catch(H){console.error("Fout bij bijwerken profiel:",H),x("Er is een fout opgetreden bij het opslaan van je profiel. Probeer het later opnieuw.")}finally{b(!1)}};return e.jsxs("form",{onSubmit:W(ae),className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Persoonlijke gegevens"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam"}),e.jsx("input",{type:"text",...m("displayName",{required:"Naam is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",onChange:a=>g("displayName",a.target.value)}),d.displayName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.displayName.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefoonnummer"}),e.jsx("input",{type:"tel",...m("phoneNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"+31 6 12345678",onChange:a=>g("phoneNumber",a.target.value)})]}),e.jsxs("div",{className:"mb-6 col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profielfoto"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[D?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:D,alt:"Profielfoto",className:"w-20 h-20 rounded-full object-cover border-2 border-primary-500",onError:a=>{console.error("Fout bij laden profielfoto:",a),a.target.src="https://via.placeholder.com/80?text=Foto"}}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center cursor-pointer",onClick:()=>{A(""),p("profilePhoto","")},children:"×"})]}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var j;const H=(j=a.target.files)==null?void 0:j[0];H&&n(H).then(()=>console.log("Profielfoto succesvol bijgewerkt")).catch(U=>console.error("Fout bij uploaden:",U))},className:"hidden",id:"profilePhoto"}),e.jsxs("label",{htmlFor:"profilePhoto",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Foto uploaden"]}),D&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Profielfoto succesvol geladen"})]})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Bedrijfsgegevens"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrijfsnaam"}),e.jsx("input",{type:"text",...m("companyName",{required:"Bedrijfsnaam is verplicht"}),className:`w-full px-3 py-2 border rounded-md ${d.companyName?"border-red-500":"border-gray-300"}`,onChange:a=>g("companyName",a.target.value)}),d.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.companyName.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",...m("companyWebsite"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://bedrijf.nl",onChange:a=>g("companyWebsite",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KVK-nummer"}),e.jsx("input",{type:"text",...m("kvkNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",onChange:a=>g("kvkNumber",a.target.value)})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Bedrijfsadres"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Straat"}),e.jsx("input",{type:"text",...m("companyStreet"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",onChange:a=>g("companyStreet",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Huisnummer"}),e.jsx("input",{type:"text",...m("companyHouseNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",onChange:a=>g("companyHouseNumber",a.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),e.jsx("input",{type:"text",...m("companyPostalCode"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",onChange:a=>g("companyPostalCode",a.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plaats"}),e.jsx("input",{type:"text",...m("companyCity"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",onChange:a=>g("companyCity",a.target.value)})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"Over het bedrijf"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo URL"}),e.jsx("input",{type:"url",...m("companyLogo"),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://bedrijf.nl/logo.png",onChange:a=>g("companyLogo",a.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL naar het bedrijfslogo voor op vacatures"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrijfsomschrijving"}),e.jsx("textarea",{...m("companyDescription"),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Vertel kandidaten meer over je bedrijf...",onChange:a=>g("companyDescription",a.target.value)})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Profiel opslaan"})})]})},Pe=()=>{const{currentUser:r,createOrUpdateProfile:v}=Se(),[x,b]=h.useState(!1),[f,B]=h.useState(null),[V,y]=h.useState(!1),[D,A]=h.useState("werkzoekende"),[m,W]=h.useState((r==null?void 0:r.displayName)||""),F=async()=>{if(!r){B("Je moet ingelogd zijn om je profiel te herstellen");return}if(!m.trim()){B("Voer een naam in");return}try{b(!0),B(null);const d=await v(m,D);console.log("Profiel succesvol hersteld:",d),y(!0),setTimeout(()=>{window.location.reload()},2e3)}catch(d){console.error("Fout bij het herstellen van profiel:",d),B("Er is een fout opgetreden bij het herstellen van je profiel. Probeer het opnieuw.")}finally{b(!1)}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 mt-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profiel herstellen"}),f&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-4",children:e.jsx("p",{className:"text-red-700",children:f})}),V&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 p-4 mb-4",children:e.jsx("p",{className:"text-green-700",children:"Profiel succesvol hersteld! De pagina wordt opnieuw geladen..."})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Je naam"}),e.jsx("input",{type:"text",value:m,onChange:d=>W(d.target.value),disabled:x||V,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"Vul je naam in"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Gebruikerstype"}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",value:"werkzoekende",checked:D==="werkzoekende",onChange:()=>A("werkzoekende"),disabled:x||V,className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2",children:"Werkzoekende"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",value:"recruiter",checked:D==="recruiter",onChange:()=>A("recruiter"),disabled:x||V,className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2",children:"Recruiter"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:F,disabled:x||V,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:x?"Bezig...":V?"Profiel Hersteld":"Profiel Herstellen"})})]})},sr=()=>{const{userProfile:r,currentUser:v,loading:x,refreshUserProfile:b,createOrUpdateProfile:f}=Se(),[B,V]=h.useState(!1),[y,D]=h.useState(null),[A,m]=h.useState(!1),[W,F]=h.useState(!1),d=ze();if(x)return e.jsxs("div",{className:"flex justify-center items-center h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"}),e.jsx("div",{className:"ml-4",children:"Profiel laden..."})]});if(!v||!r)return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Profiel niet gevonden"}),e.jsx("p",{className:"mb-6",children:"Het lijkt erop dat je profiel niet beschikbaar is. Je kunt het opnieuw aanmaken hieronder."}),e.jsx(Pe,{})]});const p=async()=>{try{V(!0),D(null),await f(r.displayName||"Gebruiker","werkzoekende"),m(!0),setTimeout(()=>m(!1),3e3)}catch(g){console.error("Fout bij repareren profiel:",g),D("Kon profiel niet repareren. Probeer later opnieuw.")}finally{V(!1)}},z=()=>Te(r)||(r==null?void 0:r.role)==="werkzoekende"||(r==null?void 0:r.userType)==="werkzoekende"?e.jsx(Ge,{user:r,onSuccess:()=>{b().then(()=>{m(!0),setTimeout(()=>m(!1),3e3)}).catch(g=>{console.error("Fout bij verversen profiel na opslaan:",g)})},onError:g=>D(g),setLoading:V}):Oe(r)||(r==null?void 0:r.role)==="recruiter"||(r==null?void 0:r.userType)==="recruiter"?e.jsx(_e,{user:r,onSuccess:()=>{m(!0),setTimeout(()=>{b().then(()=>{console.log("Profiel succesvol ververst na vertraging"),setTimeout(()=>m(!1),3e3)}).catch(g=>{console.error("Fout bij verversen profiel na opslaan:",g)})},500)},onError:g=>D(g),setLoading:V}):e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-6",children:[e.jsx("p",{className:"font-bold",children:"Profieltype niet herkend"}),e.jsx("p",{children:"We kunnen niet bepalen welk type profiel je hebt. Maak je profiel opnieuw aan om dit op te lossen."}),e.jsx("div",{className:"mt-4",children:e.jsx(Pe,{})})]});return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Mijn Profiel"}),e.jsx("button",{onClick:()=>d("/dashboard"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Terug naar dashboard"})]}),y&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6",children:e.jsx("p",{className:"text-red-700",children:y})}),A&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 p-4 mb-6",children:e.jsx("p",{className:"text-green-700",children:"Profiel succesvol bijgewerkt!"})}),r&&!r.profile&&e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-6",children:[e.jsx("p",{className:"font-bold",children:"Profiel onvolledig"}),e.jsx("p",{children:"Je profiel lijkt onvolledig of beschadigd te zijn. Klik op 'Profiel repareren' om dit probleem op te lossen."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:p,disabled:B,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 disabled:opacity-50",children:B?"Bezig...":"Profiel repareren als werkzoekende"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[z(),e.jsx("div",{className:"mt-8 pt-6 border-t",children:e.jsx("div",{className:"flex justify-end items-center",children:e.jsx("button",{onClick:()=>d("/dashboard"),className:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700",children:"Opslaan en terug"})})})]})]})};export{sr as default};
//# sourceMappingURL=ProfilePage-BEcuAJXO.js.map
