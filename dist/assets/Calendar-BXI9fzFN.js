import{u as A,r as d,j as e}from"./react-vendor-wqxTS4Az.js";import{collection as I,query as D,where as M,orderBy as T,getDocs as P}from"./firebase-firestore-CCnivBKz.js";import{u as G,b as H,d as U}from"./index-CZ_3UTiA.js";import{F as W}from"./Footer-DQrHjGn4.js";import"./firebase-app-CzzSlWfx.js";const X=()=>{const{currentUser:g,userProfile:y}=G();A();const[L,E]=d.useState([]),[S,j]=d.useState(!0),[f,v]=d.useState(null),[i,C]=d.useState(null),[l,m]=d.useState(new Date().getMonth()),[o,p]=d.useState(new Date().getFullYear()),[b,$]=d.useState([]),u=y&&H(y);d.useEffect(()=>{(async()=>{if(g)try{j(!0),v(null);const s=I(U,"meetings");let r;u?r=D(s,M("recruiterId","==",g.uid),T("dateTime","asc")):r=D(s,M("candidateId","==",g.uid),T("dateTime","asc"));const a=await P(r),h=[];a.forEach(c=>{const n=c.data();h.push({id:c.id,title:n.title||"Ongetitelde afspraak",candidateName:n.candidateName||"Onbekende kandidaat",dateTime:n.dateTime,endDateTime:n.endDateTime,description:n.description,locationType:n.locationType,location:n.location,meetingLink:n.meetingLink,status:n.status||"gepland",candidateEmail:n.candidateEmail})}),E(h)}catch(s){console.error("Fout bij ophalen van meetings:",s),v("Er is een fout opgetreden bij het ophalen van je afspraken")}finally{j(!1)}})()},[g,u]);const F=(t,s)=>new Date(t,s+1,0).getDate(),R=()=>{l===0?(m(11),p(o-1)):m(l-1)},Y=()=>{l===11?(m(0),p(o+1)):m(l+1)},w=t=>L.filter(s=>{const r=s.dateTime.toDate();return r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}),B=t=>{C(t);const s=w(t);$(s)},V=()=>{const t=new Date(o,l,1).getDay(),s=F(o,l),r=[];for(let a=0;a<t;a++)r.push(e.jsx("div",{className:"h-24 border border-gray-100 bg-gray-50"},`empty-${a}`));for(let a=1;a<=s;a++){const h=new Date(o,l,a),c=new Date,n=c.getDate()===a&&c.getMonth()===l&&c.getFullYear()===o,O=(i==null?void 0:i.getDate())===a&&(i==null?void 0:i.getMonth())===l&&(i==null?void 0:i.getFullYear())===o,x=w(h),N=x.length>0;r.push(e.jsxs("div",{onClick:()=>B(h),className:`h-24 p-1 border border-gray-200 overflow-hidden cursor-pointer transition-colors
            ${n?"bg-blue-50":"bg-white"}
            ${O?"ring-2 ring-primary-500":""}
            ${N?"hover:bg-primary-50":"hover:bg-gray-50"}
          `,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`inline-block rounded-full w-7 h-7 text-center leading-7 text-sm
              ${n?"bg-primary-500 text-white font-bold":""}
            `,children:a}),N&&e.jsx("span",{className:"rounded-full w-5 h-5 flex items-center justify-center bg-primary-500 text-white text-xs",children:x.length})]}),e.jsxs("div",{className:"mt-1 overflow-hidden space-y-1",children:[x.slice(0,2).map((k,q)=>e.jsx("div",{className:"text-xs truncate px-1 py-0.5 rounded bg-primary-100 text-primary-800",children:k.title},`meeting-preview-${k.id}-${q}`)),x.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 pl-1",children:["+ ",x.length-2," meer"]})]})]},`day-${a}`))}return r},z=(t,s)=>{const r=t.toDate(),a=s.toDate();return`${r.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit",hour12:!1})} - ${a.toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit",hour12:!1})}`};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"w-full bg-gradient-to-r from-primary-600 to-primary-800 text-white py-24",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Agenda"}),e.jsx("p",{className:"text-lg opacity-90",children:u?"Bekijk en beheer al je geplande afspraken":"Bekijk je geplande afspraken"})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-8",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:new Date(o,l).toLocaleDateString("nl-NL",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:R,className:"p-2 rounded hover:bg-gray-100","aria-label":"Vorige maand",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>{m(new Date().getMonth()),p(new Date().getFullYear())},className:"px-3 py-1 text-sm bg-gray-100 rounded hover:bg-gray-200",children:"Vandaag"}),e.jsx("button",{onClick:Y,className:"p-2 rounded hover:bg-gray-100","aria-label":"Volgende maand",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),S?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f?e.jsxs("div",{className:"text-center text-red-500 p-8 bg-red-50 rounded-lg",children:[e.jsx("p",{children:f}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-primary-600 hover:text-primary-800 font-medium",children:"Probeer opnieuw"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"].map(t=>e.jsx("div",{className:"h-10 font-medium text-gray-500 text-sm flex items-center justify-center",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:V()})]})]})}),i&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-8",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Afspraken op ",i.toLocaleDateString("nl-NL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),b.length===0?e.jsx("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"Geen afspraken gepland voor deze dag."})}):e.jsx("div",{className:"space-y-4",children:b.map(t=>e.jsx("div",{className:"border-l-4 border-primary-500 pl-4 py-3 bg-gray-50 rounded-r-lg hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:t.title}),e.jsx("p",{className:"text-primary-700",children:z(t.dateTime,t.endDateTime)}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Met: ",t.candidateName]}),t.candidateEmail&&e.jsx("p",{className:"text-gray-500 text-sm",children:t.candidateEmail}),t.description&&e.jsx("p",{className:"mt-2 text-gray-700",children:t.description}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.locationType==="online"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.locationType==="online"?"Online meeting":"Op locatie"}),t.locationType==="online"&&t.meetingLink&&e.jsx("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary-600 hover:text-primary-800 text-sm",children:"Meeting link"}),t.locationType==="locatie"&&t.location&&e.jsx("span",{className:"ml-2 text-gray-600 text-sm",children:t.location})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>window.open(`mailto:${t.candidateEmail}`,"_blank"),disabled:!t.candidateEmail,className:`p-2 rounded hover:bg-gray-200 ${t.candidateEmail?"":"opacity-50 cursor-not-allowed"}`,title:t.candidateEmail?"E-mail versturen":"Geen e-mailadres beschikbaar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})})]})},t.id))})]})}),u&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("a",{href:"/schedule-meeting",className:"inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Nieuwe afspraak plannen"]})})]})}),e.jsx(W,{})]})};export{X as default};
//# sourceMappingURL=Calendar-BXI9fzFN.js.map
