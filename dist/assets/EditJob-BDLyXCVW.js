import{d as D,u as R,r as c,j as e}from"./react-vendor-wqxTS4Az.js";import{doc as b,getDoc as E,updateDoc as y,serverTimestamp as v}from"./firebase-firestore-CCnivBKz.js";import{u as T,d as h}from"./index-CZ_3UTiA.js";import{H as N}from"./Header-DRYO9ubW.js";import{u as A}from"./form-vendor-Esn1dlm-.js";import"./firebase-app-CzzSlWfx.js";const L=()=>{const{jobId:s}=D(),m=R(),{currentUser:d}=T(),[p,u]=c.useState(!1),[w,o]=c.useState(!0),[j,i]=c.useState(null),[k,F]=c.useState(!1),{register:a,handleSubmit:S,formState:{errors:r},reset:g}=A();c.useEffect(()=>{(async()=>{if(!s||!d){i("Ongeldige vacature ID of gebruiker niet ingelogd"),o(!1);return}try{o(!0);const n=b(h,"jobs",s),x=await E(n);if(!x.exists()){i("Vacature niet gevonden"),o(!1);return}const t=x.data();if(t.recruiterId!==d.uid){F(!0),o(!1);return}g({title:t.title||"",company:t.company||"",location:t.location||"",description:t.description||"",requirements:t.requirements||"",salary:t.salary||"",isFullTime:t.isFullTime||!1,isRemote:t.isRemote||!1,status:t.status||"active"}),o(!1)}catch(n){console.error("Fout bij ophalen vacature:",n),i("Er is een fout opgetreden bij het laden van de vacature"),o(!1)}})()},[s,d,g]);const z=async l=>{if(!d||!s){i("Je moet ingelogd zijn en een geldige vacature ID hebben");return}u(!0),i(null);try{const n=b(h,"jobs",s),x={...l,updatedAt:v()};await y(n,x),m(`/job/${s}`)}catch(n){console.error("Fout bij bijwerken vacature:",n),i("Er is een fout opgetreden bij het bijwerken van de vacature. Probeer het later opnieuw."),u(!1)}},f=()=>{m(`/job/${s}`)},q=async()=>{if(confirm("Weet je zeker dat je deze vacature wilt verwijderen? Dit kan niet ongedaan worden gemaakt.")){if(!d||!s){i("Je moet ingelogd zijn en een geldige vacature ID hebben");return}try{u(!0);const l=b(h,"jobs",s);await y(l,{status:"deleted",updatedAt:v()}),m("/dashboard")}catch(l){console.error("Fout bij verwijderen vacature:",l),i("Er is een fout opgetreden bij het verwijderen van de vacature"),u(!1)}}};return k?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(N,{}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-3xl",children:[e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",children:e.jsx("p",{children:"Je hebt geen toestemming om deze vacature te bewerken."})}),e.jsx("button",{onClick:()=>m("/dashboard"),className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Terug naar dashboard"})]})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(N,{}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-3xl",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vacature bewerken"}),e.jsx("button",{onClick:f,className:"text-gray-600 hover:text-gray-800",children:"Annuleren"})]}),j&&e.jsx("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4",children:e.jsx("p",{children:j})}),w?e.jsxs("div",{className:"flex justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Vacature laden..."})]}):e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("form",{onSubmit:S(z),className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Functietitel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"title",...a("title",{required:"Functietitel is verplicht"}),className:`w-full px-3 py-2 border ${r.title?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"bijv. Frontend Developer"}),r.title&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.title.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-1",children:["Bedrijfsnaam ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"company",...a("company",{required:"Bedrijfsnaam is verplicht"}),className:`w-full px-3 py-2 border ${r.company?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"bijv. Tech Solutions BV"}),r.company&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.company.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:["Locatie ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"location",...a("location",{required:"Locatie is verplicht"}),className:`w-full px-3 py-2 border ${r.location?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"bijv. Amsterdam"}),r.location&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.location.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"status",...a("status",{required:"Status is verplicht"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"active",children:"Actief"}),e.jsx("option",{value:"paused",children:"Gepauzeerd"}),e.jsx("option",{value:"closed",children:"Gesloten"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Salarisindicatie"}),e.jsx("input",{type:"text",id:"salary",...a("salary"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"bijv. €3000-€4000 per maand"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isFullTime",...a("isFullTime"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isFullTime",className:"ml-2 block text-sm text-gray-700",children:"Fulltime"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isRemote",...a("isRemote"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isRemote",className:"ml-2 block text-sm text-gray-700",children:"Mogelijkheid tot thuiswerken"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:["Functieomschrijving ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",...a("description",{required:"Functieomschrijving is verplicht"}),rows:6,className:`w-full px-3 py-2 border ${r.description?"border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500`,placeholder:"Beschrijf de functie, taken en verantwoordelijkheden..."}),r.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"requirements",className:"block text-sm font-medium text-gray-700 mb-1",children:"Functie-eisen"}),e.jsx("textarea",{id:"requirements",...a("requirements"),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Beschrijf de kennis, vaardigheden en ervaring die nodig zijn voor deze functie..."})]}),e.jsxs("div",{className:"pt-4 flex justify-between",children:[e.jsx("button",{type:"button",onClick:q,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",disabled:p,children:"Vacature verwijderen"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Annuleren"}),e.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-t-2 border-b-2 border-white rounded-full"}),"Bezig met opslaan..."]}):"Wijzigingen opslaan"})]})]})]})})]})]})};export{L as default};
//# sourceMappingURL=EditJob-BDLyXCVW.js.map
